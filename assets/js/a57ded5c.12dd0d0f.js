(self.webpackChunkreading_books_record_repository=self.webpackChunkreading_books_record_repository||[]).push([[4405],{3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return m},kt:function(){return u}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var o=r.createContext({}),c=function(e){var n=r.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},m=function(e){var n=c(e.components);return r.createElement(o.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),d=c(t),u=a,k=d["".concat(o,".").concat(u)]||d[u]||p[u]||i;return t?r.createElement(k,l(l({ref:n},m),{},{components:t})):r.createElement(k,l({ref:n},m))}));function u(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,l=new Array(i);l[0]=d;var s={};for(var o in n)hasOwnProperty.call(n,o)&&(s[o]=n[o]);s.originalType=e,s.mdxType="string"==typeof e?e:a,l[1]=s;for(var c=2;c<i;c++)l[c]=t[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},5572:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return o},metadata:function(){return c},toc:function(){return m},default:function(){return d}});var r=t(2122),a=t(9756),i=(t(7294),t(3905)),l=["components"],s={sidebar_position:13,sidebar_label:"12. \ud0c0\uc785\uc2a4\ud06c\ub9bd\ud2b8 \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d \uc2e4\uc2b5"},o="\ud83d\udc24 Chapter 12: \ud0c0\uc785\uc2a4\ud06c\ub9bd\ud2b8 \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d \uc2e4\uc2b5",c={unversionedId:"typescript/do-it-typescript/chapter-12",id:"typescript/do-it-typescript/chapter-12",isDocsHomePage:!1,title:"\ud83d\udc24 Chapter 12: \ud0c0\uc785\uc2a4\ud06c\ub9bd\ud2b8 \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d \uc2e4\uc2b5",description:"\ud83e\udd84 \ube45\ub370\uc774\ud130 \ubc30\uce58 \ud504\ub85c\uadf8\ub7a8 \ub9cc\ub4e4\uae30",source:"@site/docs/typescript/do-it-typescript/chapter-12.md",sourceDirName:"typescript/do-it-typescript",slug:"/typescript/do-it-typescript/chapter-12",permalink:"/reading_books_record_repository/docs/typescript/do-it-typescript/chapter-12",editUrl:"https://github.com/saseungmin/reading_books_record_repository/tree/master/docs/typescript/do-it-typescript/chapter-12.md",version:"current",sidebarPosition:13,frontMatter:{sidebar_position:13,sidebar_label:"12. \ud0c0\uc785\uc2a4\ud06c\ub9bd\ud2b8 \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d \uc2e4\uc2b5"},sidebar:"tutorialSidebar",previous:{title:"11. \ubaa8\ub098\ub4dc",permalink:"/reading_books_record_repository/docs/typescript/do-it-typescript/chapter-11"},next:{title:"\ud83d\ude80 \ucc45 \ubaa9\ub85d",permalink:"/reading_books_record_repository/docs/agile/table-of-contents"}},m=[{value:"\ud83e\udd84 \ube45\ub370\uc774\ud130 \ubc30\uce58 \ud504\ub85c\uadf8\ub7a8 \ub9cc\ub4e4\uae30",id:"-\ube45\ub370\uc774\ud130-\ubc30\uce58-\ud504\ub85c\uadf8\ub7a8-\ub9cc\ub4e4\uae30",children:[{value:"\ud83d\udcda \ub178\ub4dc\uc81c\uc774\uc5d0\uc2a4\uc5d0\uc11c \ud504\ub85c\uadf8\ub7a8 \uba85\ub839 \uc904 \uc778\uc218 \uc77d\uae30",id:"-\ub178\ub4dc\uc81c\uc774\uc5d0\uc2a4\uc5d0\uc11c-\ud504\ub85c\uadf8\ub7a8-\uba85\ub839-\uc904-\uc778\uc218-\uc77d\uae30",children:[]},{value:"\ud83d\udcda \ud30c\uc77c \ucc98\ub9ac \ube44\ub3d9\uae30 \ud568\uc218\ub97c \ud504\ub85c\ubbf8\uc2a4\ub85c \uad6c\ud604\ud558\uac00",id:"-\ud30c\uc77c-\ucc98\ub9ac-\ube44\ub3d9\uae30-\ud568\uc218\ub97c-\ud504\ub85c\ubbf8\uc2a4\ub85c-\uad6c\ud604\ud558\uac00",children:[]},{value:"\ud83d\udcda \uadf8\ub7f4\ub4ef\ud55c \uac00\uc9dc \ub370\uc774\ud130 \ub9cc\ub4e4\uae30",id:"-\uadf8\ub7f4\ub4ef\ud55c-\uac00\uc9dc-\ub370\uc774\ud130-\ub9cc\ub4e4\uae30",children:[]},{value:"\ud83d\udcda Object.keys\uc640 Object.values \ud568\uc218 \uc0ac\uc6a9\ud558\uae30",id:"-objectkeys\uc640-objectvalues-\ud568\uc218-\uc0ac\uc6a9\ud558\uae30",children:[]},{value:"\ud83d\udcda CSV \ud30c\uc77c \ub9cc\ub4e4\uae30",id:"-csv-\ud30c\uc77c-\ub9cc\ub4e4\uae30",children:[]},{value:"\ud83d\udcda \ub370\uc774\ud130\ub97c CSV \ud30c\uc77c\uc5d0 \uc4f0\uae30",id:"-\ub370\uc774\ud130\ub97c-csv-\ud30c\uc77c\uc5d0-\uc4f0\uae30",children:[]},{value:"\ud83d\udcda zip \ud568\uc218 \ub9cc\ub4e4\uae30",id:"-zip-\ud568\uc218-\ub9cc\ub4e4\uae30",children:[]},{value:"\ud83d\udcda CSV \ud30c\uc77c \ub370\uc774\ud130 \uc77d\uae30",id:"-csv-\ud30c\uc77c-\ub370\uc774\ud130-\uc77d\uae30",children:[]}]},{value:"\ud83e\udd84 \ubabd\uace0DB\uc5d0 \ub370\uc774\ud130 \uc800\uc7a5\ud558\uae30",id:"-\ubabd\uace0db\uc5d0-\ub370\uc774\ud130-\uc800\uc7a5\ud558\uae30",children:[{value:"\ud83d\udcda \ubabd\uace0DB\uc5d0 \uc811\uc18d\ud558\uae30",id:"-\ubabd\uace0db\uc5d0-\uc811\uc18d\ud558\uae30",children:[]},{value:"\ud83d\udcda \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0",id:"-\ub370\uc774\ud130\ubca0\uc774\uc2a4-\uc5f0\uacb0",children:[]},{value:"\ud83d\udcda \uceec\ub809\uc158\uc744 \uc0dd\uc131",id:"-\uceec\ub809\uc158\uc744-\uc0dd\uc131",children:[]},{value:"\ud83d\udcda \ubb38\uc11c\ub97c \uceec\ub809\uc158\uc5d0 \uc800\uc7a5\ud558\uae30",id:"-\ubb38\uc11c\ub97c-\uceec\ub809\uc158\uc5d0-\uc800\uc7a5\ud558\uae30",children:[]},{value:"\ud83d\udcda \ubb38\uc11c \ucc3e\uae30, \ubb38\uc11c \uc0ad\uc81c\ud558\uae30, \uac80\uc0c9 \uacb0\uacfc \uc815\ub82c",id:"-\ubb38\uc11c-\ucc3e\uae30-\ubb38\uc11c-\uc0ad\uc81c\ud558\uae30-\uac80\uc0c9-\uacb0\uacfc-\uc815\ub82c",children:[]},{value:"\ud83d\udcda CSV \ud30c\uc77c \ubabd\uace0DB\uc5d0 \uc800\uc7a5\ud558\uae30",id:"-csv-\ud30c\uc77c-\ubabd\uace0db\uc5d0-\uc800\uc7a5\ud558\uae30",children:[]},{value:"\ud83d\udcda limit\uc640 skip \uba54\uc11c\ub4dc",id:"-limit\uc640-skip-\uba54\uc11c\ub4dc",children:[]}]},{value:"\ud83e\udd84 \uc775\uc2a4\ud504\ub808\uc2a4\ub85c API \uc11c\ubc84 \ub9cc\ub4e4\uae30",id:"-\uc775\uc2a4\ud504\ub808\uc2a4\ub85c-api-\uc11c\ubc84-\ub9cc\ub4e4\uae30",children:[{value:"\ud83d\udcda \uc775\uc2a4\ud504\ub808\uc2a4 \ud504\ub808\uc784\uc6cc\ud06c",id:"-\uc775\uc2a4\ud504\ub808\uc2a4-\ud504\ub808\uc784\uc6cc\ud06c",children:[]},{value:"\ud83d\udcda \ub77c\uc6b0\ud305 \uae30\ub2a5 \uad6c\ud604",id:"-\ub77c\uc6b0\ud305-\uae30\ub2a5-\uad6c\ud604",children:[]},{value:"\ud83d\udcda \uc775\uc2a4\ud504\ub808\uc2a4 \ubbf8\ub4e4\uc6e8\uc5b4 \ucd94\uac00",id:"-\uc775\uc2a4\ud504\ub808\uc2a4-\ubbf8\ub4e4\uc6e8\uc5b4-\ucd94\uac00",children:[]},{value:"\ud83d\udcda \ubabd\uace0DB \uc5f0\uacb0",id:"-\ubabd\uace0db-\uc5f0\uacb0",children:[]}]},{value:"\ud83e\udd84 \ub9ac\uc561\ud2b8\uc640 \ubd80\ud2b8\uc2a4\ud2b8\ub7a9\uc73c\ub85c \ud504\ub7f0\ud2b8\uc5d4\ub4dc \uc6f9 \ub9cc\ub4e4\uae30",id:"-\ub9ac\uc561\ud2b8\uc640-\ubd80\ud2b8\uc2a4\ud2b8\ub7a9\uc73c\ub85c-\ud504\ub7f0\ud2b8\uc5d4\ub4dc-\uc6f9-\ub9cc\ub4e4\uae30",children:[{value:"\ud83d\udcda App.tsx \ud30c\uc77c \uc218\uc815",id:"-apptsx-\ud30c\uc77c-\uc218\uc815",children:[]},{value:"\ud83d\udcda API \uc11c\ubc84\uc5d0\uc11c \uc2e4\uc81c \ub370\uc774\ud130 \uac00\uc838\uc624\uae30",id:"-api-\uc11c\ubc84\uc5d0\uc11c-\uc2e4\uc81c-\ub370\uc774\ud130-\uac00\uc838\uc624\uae30",children:[]},{value:"\ud83d\udcda \uc11c\ubc84\uc5d0\uc11c \ub370\uc774\ud130 \uacc4\uc18d \uac00\uc838\uc624\uae30",id:"-\uc11c\ubc84\uc5d0\uc11c-\ub370\uc774\ud130-\uacc4\uc18d-\uac00\uc838\uc624\uae30",children:[]},{value:"\ud83d\udcda \ubd80\ud2b8\uc2a4\ud2b8\ub7a9 CSS \ud504\ub808\uc784\uc6cc\ud06c \uc0ac\uc6a9\ud558\uae30",id:"-\ubd80\ud2b8\uc2a4\ud2b8\ub7a9-css-\ud504\ub808\uc784\uc6cc\ud06c-\uc0ac\uc6a9\ud558\uae30",children:[]},{value:"\ud83d\udcda \uce74\ub4dc \ucef4\ud3ec\ub10c\ud2b8 \ub9cc\ub4e4\uae30",id:"-\uce74\ub4dc-\ucef4\ud3ec\ub10c\ud2b8-\ub9cc\ub4e4\uae30",children:[]}]}],p={toc:m};function d(e){var n=e.components,t=(0,a.Z)(e,l);return(0,i.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"-chapter-12-\ud0c0\uc785\uc2a4\ud06c\ub9bd\ud2b8-\ud568\uc218\ud615-\ud504\ub85c\uadf8\ub798\ubc0d-\uc2e4\uc2b5"},"\ud83d\udc24 Chapter 12: \ud0c0\uc785\uc2a4\ud06c\ub9bd\ud2b8 \ud568\uc218\ud615 \ud504\ub85c\uadf8\ub798\ubc0d \uc2e4\uc2b5"),(0,i.kt)("h2",{id:"-\ube45\ub370\uc774\ud130-\ubc30\uce58-\ud504\ub85c\uadf8\ub7a8-\ub9cc\ub4e4\uae30"},"\ud83e\udd84 \ube45\ub370\uc774\ud130 \ubc30\uce58 \ud504\ub85c\uadf8\ub7a8 \ub9cc\ub4e4\uae30"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\uc2e4\uc2b5\uc5d0 \ub300\ud55c \ub0b4\uc6a9\uc774\ubbc0\ub85c \uc790\uc138\ud55c \ub0b4\uc6a9\uc740 \ucc45\uc744 \ucc38\uace0(P.340 ~ P.365)")),(0,i.kt)("h3",{id:"-\ub178\ub4dc\uc81c\uc774\uc5d0\uc2a4\uc5d0\uc11c-\ud504\ub85c\uadf8\ub7a8-\uba85\ub839-\uc904-\uc778\uc218-\uc77d\uae30"},"\ud83d\udcda \ub178\ub4dc\uc81c\uc774\uc5d0\uc2a4\uc5d0\uc11c \ud504\ub85c\uadf8\ub7a8 \uba85\ub839 \uc904 \uc778\uc218 \uc77d\uae30"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"export type FileNameAndNumber = [string, number];\n\nexport const getFileNameAndNumber = (\n  defaultFilename: string,\n  defaultNumberOfFakeData: number,\n): FileNameAndNumber => {\n  const [bin, node, filename, numberOfFakeData] = process.argv;\n\n  return [\n    filename || defaultFilename,\n    numberOfFakeData ? parseInt(numberOfFakeData, 10) : defaultNumberOfFakeData,\n  ];\n};\n")),(0,i.kt)("h3",{id:"-\ud30c\uc77c-\ucc98\ub9ac-\ube44\ub3d9\uae30-\ud568\uc218\ub97c-\ud504\ub85c\ubbf8\uc2a4\ub85c-\uad6c\ud604\ud558\uac00"},"\ud83d\udcda \ud30c\uc77c \ucc98\ub9ac \ube44\ub3d9\uae30 \ud568\uc218\ub97c \ud504\ub85c\ubbf8\uc2a4\ub85c \uad6c\ud604\ud558\uac00"),(0,i.kt)("h4",{id:"-fsaccess-api\ub85c-\ub514\ub809\ud130\ub9ac\ub098-\ud30c\uc77c-\ud655\uc778\ud558\uae30"},"\ud83c\udf88 fs.access API\ub85c \ub514\ub809\ud130\ub9ac\ub098 \ud30c\uc77c \ud655\uc778\ud558\uae30"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\ucf54\ub4dc\ub97c \uc791\uc131\ud558\ub2e4 \ubcf4\uba74 \ud30c\uc77c\uc774\ub098 \ub514\ub809\ud130\ub9ac\uac00 \ud604\uc7ac \uc788\ub294\uc9c0 \uc5c6\ub294\uc9c0\ub97c \ud655\uc778\ud574\uc57c \ud560 \ub54c\uac00 \uc0dd\uae34\ub2e4.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import * as fs from 'fs';\n\nexport const fileExist = (\n  filepath: string,\n): Promise<boolean> => new Promise((resolve) => fs.access(filepath, (error) => resolve(!error)));\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"fileExists-test.ts"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { fileExist } from '../fileApi/fileExists';\n\nconst exists = async (filepath) => {\n  const result = await fileExist(filepath);\n  console.log(`${filepath} ${result ? 'exists' : 'not exists'}`);\n};\n\nexists('./package.json');\nexists('./package');\n")),(0,i.kt)("h4",{id:"-mkdirp-\ud328\ud0a4\uc9c0\ub85c-\ub514\ub809\ud130\ub9ac-\uc0dd\uc131-\ud568\uc218-\ub9cc\ub4e4\uae30"},"\ud83c\udf88 mkdirp \ud328\ud0a4\uc9c0\ub85c \ub514\ub809\ud130\ub9ac \uc0dd\uc131 \ud568\uc218 \ub9cc\ub4e4\uae30"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import mkdirp from 'mkdirp';\n\nimport { fileExist } from './fileExists';\n\nexport const mkdir = (dirname: string): Promise<string> => new Promise(async (resolve, reject) => {\n  const alreadyExists = await fileExist(dirname);\n\n  if (alreadyExists) {\n    resolve(dirname);\n    return;\n  }\n\n  mkdirp(dirname)\n    .then(() => resolve(dirname))\n    .catch((error) => reject(error));\n});\n")),(0,i.kt)("h4",{id:"-rimraf-\ud328\ud0a4\uc9c0\ub85c-\ub514\ub809\ud130\ub9ac-\uc0ad\uc81c-\ud568\uc218-\ub9cc\ub4e4\uae30"},"\ud83c\udf88 rimraf \ud328\ud0a4\uc9c0\ub85c \ub514\ub809\ud130\ub9ac \uc0ad\uc81c \ud568\uc218 \ub9cc\ub4e4\uae30"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import rimraf from 'rimraf';\n\nimport { fileExist } from './fileExists';\n\nexport const rmdir = (dirname: string): Promise<string> => new Promise(async (resolve, reject) => {\n  const alreadyExists = await fileExist(dirname);\n\n  if (!alreadyExists) {\n    resolve(dirname);\n    return;\n  }\n\n  rimraf(dirname, (error) => (error ? reject(error) : resolve(dirname)));\n});\n")),(0,i.kt)("h4",{id:"-fswritefile-api\ub85c-\ud30c\uc77c-\uc0dd\uc131\ud558\uae30"},"\ud83c\udf88 fs.writeFile API\ub85c \ud30c\uc77c \uc0dd\uc131\ud558\uae30"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\ub178\ub4dc\uc81c\uc774\uc5d0\uc2a4 \ud658\uacbd\uc5d0\uc11c \ud30c\uc77c\uc758 \ub370\uc774\ud130\ub97c \uc77d\uac70\ub098 \uc4f8 \ub54c\ub294 \ub300\ubd80\ubd84 \ud14d\uc2a4\ud2b8 \ub370\uc774\ud130\ub97c \ub300\uc0c1\uc73c\ub85c \ud55c\ub2e4."),(0,i.kt)("li",{parentName:"ul"},"\uc774\ub54c \ud14d\uc2a4\ud2b8 \ub370\uc774\ud130\ub294 \uc720\ub2c8\ucf54\ub4dc\ub85c \ucc98\ub9ac\ud574\uc57c \ud55c\ub2e4.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import * as fs from 'fs';\n\nexport const writeFile = (\n  filename: string, data: any,\n): Promise<any> => new Promise((resolve, reject) => {\n  fs.writeFile(filename, data, 'utf8', (error: Error) => {\n    if (error) {\n      reject(error);\n      return;\n    }\n\n    resolve(data);\n  });\n});\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"writeFile-test.ts"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { writeFile } from '../fileApi/writeFile';\nimport { mkdir } from '../fileApi/mkdir';\n\nconst writeTest = async (filename: string, data: any) => {\n  const result = await writeFile(filename, data);\n  console.log(`write ${result} to ${filename}`);\n};\n\nmkdir('./data')\n  .then(() => writeTest('./data/hello.txt', 'hello world'))\n  .then(() => writeTest('./data/test.json', JSON.stringify({ name: 'Jack', age: 32 }, null, 2)))\n  .catch((e: Error) => console.log(e.message))\n")),(0,i.kt)("h4",{id:"-fsreadfile-api\ub85c-\ud30c\uc77c-\ub0b4\uc6a9-\uc77d\uae30"},"\ud83c\udf88 fs.readFile API\ub85c \ud30c\uc77c \ub0b4\uc6a9 \uc77d\uae30"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import * as fs from 'fs';\n\nexport const readFile = (filename: string): Promise<any> => new Promise<any>((resolve, reject) => {\n  fs.readFile(filename, 'utf8', (error: Error, data: any) => {\n    if (error) {\n      reject(error);\n      return;\n    }\n\n    resolve(data);\n  });\n});\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"readFile-test.ts"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { readFile } from '../fileApi/readFile';\n\nconst readTest = async (filename: string) => {\n  const result = await readFile(filename);\n  console.log(`read ${result} from ${filename} file.`);\n};\n\nreadTest('./data/hello.txt')\n  .then(() => readTest('./data/test.json'))\n  .catch((e: Error) => console.log(e.message));\n")),(0,i.kt)("h4",{id:"-fsappendfile-api\ub85c-\ud30c\uc77c\uc5d0-\ub0b4\uc6a9-\ucd94\uac00\ud558\uae30"},"\ud83c\udf88 fs.appendFile API\ub85c \ud30c\uc77c\uc5d0 \ub0b4\uc6a9 \ucd94\uac00\ud558\uae30"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import * as fs from 'fs';\n\nexport const appendFile = (\n  filename: string, data: any,\n): Promise<any> => new Promise((resolve, reject) => {\n  fs.appendFile(filename, data, 'utf8', (error: Error) => {\n    if (error) {\n      reject(error);\n      return;\n    }\n\n    resolve(data);\n  });\n});\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"appendFile-test.ts"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { appendFile } from '../fileApi/appendFile';\nimport { mkdir } from '../fileApi/mkdir';\n\nconst appendTest = async (filename: string, data: any) => {\n  const result = await appendFile(filename, data);\n  console.log(`append ${result} to ${filename}`);\n};\n\nmkdir('./data')\n  .then(() => appendTest('./data/hello.txt', 'Hi there!'))\n  .catch((e: Error) => console.log(e.message));\n")),(0,i.kt)("h4",{id:"-fsunlink-api\ub85c-\ud30c\uc77c-\uc0ad\uc81c\ud558\uae30"},"\ud83c\udf88 fs.unlink API\ub85c \ud30c\uc77c \uc0ad\uc81c\ud558\uae30"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import * as fs from 'fs';\n\nimport { fileExists } from './fileExists';\n\nexport const deleteFile = (\n  filename: string,\n): Promise<string> => new Promise<any>(async (resolve, reject) => {\n  const alreadyExists = await fileExists(filename);\n\n  if (!alreadyExists) {\n    resolve(filename);\n    return;\n  }\n\n  fs.unlink(filename, (error) => (error ? reject(error) : resolve(filename)));\n});\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"deleteFile-test.ts"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { deleteFile } from '../fileApi/deleteFile';\nimport { rmdir } from '../fileApi/rmdir';\n\nconst deleteTest = async (filename: string) => {\n  const result = await deleteFile(filename);\n  console.log(`delete ${result} file.`);\n};\n\nPromise.all([deleteTest('./data/hello.txt'), deleteTest('./data/test.json')])\n  .then(() => rmdir('./data'))\n  .then((dirname) => console.log(`delete ${dirname} dir`))\n  .catch((e: Error) => console.log(e.message));\n")),(0,i.kt)("h4",{id:"-srcfileapiindexts-\ud30c\uc77c-\ub9cc\ub4e4\uae30"},"\ud83c\udf88 src/fileApi/index.ts \ud30c\uc77c \ub9cc\ub4e4\uae30"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { fileExists } from './fileExists';\nimport { mkdir } from './mkdir';\nimport { rmdir } from './rmdir';\nimport { writeFile } from './writeFile';\nimport { readFile } from './readFile';\nimport { appendFile } from './appendFile';\nimport { deleteFile } from './deleteFile';\n\nexport {\n  fileExists, mkdir, rmdir, writeFile, readFile, appendFile, deleteFile,\n};\n")),(0,i.kt)("h3",{id:"-\uadf8\ub7f4\ub4ef\ud55c-\uac00\uc9dc-\ub370\uc774\ud130-\ub9cc\ub4e4\uae30"},"\ud83d\udcda \uadf8\ub7f4\ub4ef\ud55c \uac00\uc9dc \ub370\uc774\ud130 \ub9cc\ub4e4\uae30"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"export interface IFake {\n  name: string;\n  email: string;\n  sentence: string;\n  profession: string;\n  birthday: Date;\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"makeFakeData.ts"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { Chance } from 'chance';\n\nimport { IFake } from './IFake';\n\nconst c = new Chance();\n\nexport const makeFakeData = (): IFake => ({\n  name: c.name(),\n  email: c.email(),\n  profession: c.profession(),\n  birthday: c.birthday(),\n  sentence: c.sentence(),\n});\n\nexport { IFake };\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"makeFakeData-test.ts"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { makeFakeData, IFake } from '../fake/makeFakeData';\n\nconst fakeData: IFake = makeFakeData();\n\nconsole.log(fakeData);\n")),(0,i.kt)("h3",{id:"-objectkeys\uc640-objectvalues-\ud568\uc218-\uc0ac\uc6a9\ud558\uae30"},"\ud83d\udcda Object.keys\uc640 Object.values \ud568\uc218 \uc0ac\uc6a9\ud558\uae30"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { IFake, makeFakeData } from '../fake/makeFakeData';\n\nconst data: IFake = makeFakeData();\nconst keys = Object.keys(data);\n\nconsole.log('keys: ', keys);\n\nconst values = Object.values(data);\n\nconsole.log('values: ', values);\n")),(0,i.kt)("h3",{id:"-csv-\ud30c\uc77c-\ub9cc\ub4e4\uae30"},"\ud83d\udcda CSV \ud30c\uc77c \ub9cc\ub4e4\uae30"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\uac00\uc9dc \ub370\uc774\ud130\ub97c \uc5ec\ub7ec \uac1c \uc0dd\uc131")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"export function* range(max: number, min: number = 0) {\n  while (min < max) {\n    yield min++;\n  }\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"makeFakeData"),"\ub97c \uc0ac\uc6a9\ud574 ",(0,i.kt)("inlineCode",{parentName:"li"},"numberOfItems"),"\ub9cc\ud07c ",(0,i.kt)("inlineCode",{parentName:"li"},"IFake")," \uac1d\uccb4\ub97c \uc0dd\uc131\ud55c\ub2e4. \uadf8\ub9ac\uace0 \uc18d\uc131\uba85\uacfc \uc18d\uc131\uac12\uc758 \ubc30\uc5f4\uc744 \uac01\uac01 \ucd94\ucd9c\ud574 ",(0,i.kt)("inlineCode",{parentName:"li"},"filename")," \ud30c\uc77c\uc744 \ub9cc\ub4e0\ub2e4.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import * as path from 'path';\n\nimport { mkdir } from '../fileApi/mkdir';\nimport { range } from '../utils/range';\nimport { IFake } from './IFake';\nimport { makeFakeData } from './makeFakeData';\nimport { writeFile } from '../fileApi/writeFile';\nimport { appendFile } from '../fileApi/appendFile';\n\nexport const writeCsvFormatFakeData = async (\n  filename: string, numberOfItems: number,\n) : Promise<string> => {\n  const dirname = path.dirname(filename);\n  await mkdir(dirname);\n\n  const comma = ',';\n  const newLine = '\\n';\n\n  for (const n of range(numberOfItems)) {\n    const fake: IFake = makeFakeData();\n\n    if (n === 0) {\n      const keys = Object.keys(fake).join(comma);\n      await writeFile(filename, keys);\n    }\n\n    const values = Object.values(fake).join(comma);\n    await appendFile(filename, newLine + values);\n  }\n\n  return `write ${numberOfItems} items to ${filename} file`;\n};\n")),(0,i.kt)("h3",{id:"-\ub370\uc774\ud130\ub97c-csv-\ud30c\uc77c\uc5d0-\uc4f0\uae30"},"\ud83d\udcda \ub370\uc774\ud130\ub97c CSV \ud30c\uc77c\uc5d0 \uc4f0\uae30"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"CSV \ud30c\uc77c \ud3ec\ub9f7\uc73c\ub85c ",(0,i.kt)("inlineCode",{parentName:"li"},"IFake")," \ud0c0\uc785 \uac1d\uccb4\ub97c \uc800\uc7a5\ud558\ub294 \ud30c\uc77c\uc744 \ub9cc\ub4e4\uace0 \ub2e4\uc74c\uacfc \uac19\uc774 \ucf54\ub4dc\ub97c \uc791\uc131\ud55c\ub2e4.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { getFileNameAndNumber } from './utils/getFileNameAndNumber';\nimport { writeCsvFormatFakeData } from './fake/writeCsvFormatFakeData';\n\nconst [filename, numberOfFakeData] = getFileNameAndNumber('./data/fake', 1);\nconst csvFilename = `${filename}-${numberOfFakeData}.csv`;\n\nwriteCsvFormatFakeData(csvFilename, numberOfFakeData)\n  .then((result) => console.log(result))\n  .catch((e: Error) => console.log(e.message));\n")),(0,i.kt)("h3",{id:"-zip-\ud568\uc218-\ub9cc\ub4e4\uae30"},"\ud83d\udcda zip \ud568\uc218 \ub9cc\ub4e4\uae30"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"CSV \ud3ec\ub9f7 \ud30c\uc77c\uc744 \uc77d\ub294 \ucf54\ub4dc\ub97c \uc791\uc131"),(0,i.kt)("li",{parentName:"ul"},"\uac1d\uccb4\uc758 \uc18d\uc131\uba85 \ubc30\uc5f4\uacfc \uc18d\uc131\uac12 \ubc30\uc5f4\uc744 \uacb0\ud569\ud574 \uac1d\uccb4\ub97c \ub9cc\ub4dc\ub294 \ud568\uc218\uac00 \ud544\uc694\ud55c\ub370 \uc774\ub7ec\ud55c \uae30\ub2a5\uc744 \ud558\ub294 \ud568\uc218\ub294 \ubcf4\ud1b5 ",(0,i.kt)("inlineCode",{parentName:"li"},"zip"),"\ub77c\ub294 \uc774\ub984\uc73c\ub85c \uad6c\ud604\ud55c\ub2e4.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"export const zip = (keys: string[], values: any[]) => {\n  const makeObject = (key: string, value: any) => ({ [key]: value });\n  const mergeObject = (a: any[]) => a.reduce((sum, val) => ({ ...sum, ...val }), {});\n\n  const tmp = keys\n    .map((key, index) => [key, values[index]])\n    .filter((a) => a[0] && a[1])\n    .map((a) => makeObject(a[0], a[1]));\n\n  return mergeObject(tmp);\n};\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"zip-test.ts"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { zip } from '../utils';\nimport { makeFakeData, IFake } from '../fake';\n\nconst data = makeFakeData();\nconst keys = Object.keys(data);\nconst values = Object.values(data);\n\nconst fake: IFake = zip(keys, values) as IFake;\n\nconsole.log(fake);\n")),(0,i.kt)("h3",{id:"-csv-\ud30c\uc77c-\ub370\uc774\ud130-\uc77d\uae30"},"\ud83d\udcda CSV \ud30c\uc77c \ub370\uc774\ud130 \uc77d\uae30"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\ub2e4\uc74c \ucf54\ub4dc\ub294 1,024Byte\uc758 Buffer \ud0c0\uc785 \uac1d\uccb4\ub97c \uc0dd\uc131\ud574 \ud30c\uc77c\uc744 1,024Byte\uc529 \uc77d\uc73c\uba74\uc11c \ud55c \uc904\uc529 \ucc3e\uc740 \ub4a4, \ucc3e\uc740 \uc904(\uc989, ",(0,i.kt)("inlineCode",{parentName:"li"},"\\n"),"\uc73c\ub85c \ub05d\ub09c \uc904)\uc758 \ub370\uc774\ud130\ub97c ",(0,i.kt)("inlineCode",{parentName:"li"},"yield"),"\ubb38\uc73c\ub85c \ubc1c\uc0dd\uc2dc\ud0a4\ub294 \uc608\uc774\ub2e4.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import * as fs from 'fs';\n\nfunction readLine(fd: any, buffer: Buffer, bufferSize: number, position: number): [string, number] {\n  let line = '';\n  let readSize;\n  const crSize = '\\n'.length;\n\n  while (true) {\n    readSize = fs.readSync(fd, buffer, 0, bufferSize, position);\n\n    if (readSize > 0) {\n      const temp = buffer.toString('utf8', 0, readSize);\n      const index = temp.indexOf('\\n');\n\n      if (index > -1) {\n        line += temp.substr(0, index);\n        position += index + crSize;\n        break;\n      } else {\n        line += temp;\n        position += temp.length;\n      }\n    } else {\n      position = -1; // end of file\n      break;\n    }\n  }\n\n  return [line.trim(), position];\n}\n\nexport function* readFileGenerator(filename: string): any {\n  let fd: any;\n\n  try {\n    fd = fs.openSync(filename, 'rs');\n\n    const stats = fs.fstatSync(fd);\n    const bufferSize = Math.min(stats.size, 1024);\n    const buffer = Buffer.alloc(bufferSize + 4);\n    let filepos = 0;\n    let line;\n\n    while (filepos > -1) {\n      [line, filepos] = readLine(fd, buffer, bufferSize, filepos);\n\n      if (filepos > -1) {\n        yield line;\n      }\n    }\n\n    yield buffer.toString(); // \ub9c8\uc9c0\ub9c9 \uc904\n  } catch (error) {\n    console.log('readLine: ', error.message);\n  } finally {\n    fd && fs.closeSync(fd);\n  }\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"readFileGenerator-test.ts")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"readFileGenerator"),"\ub294 \ub2e8\uc21c\ud788 \ud55c \uc904 \ud55c \uc904 \uc77d\ub294\ub2e4.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { readFileGenerator } from '../fileApi';\n\nfor (const value of readFileGenerator('data/fake-10000.csv')) {\n  console.log('<line>', value, '</line>');\n  break;\n}\n\n// <line> name,email,profession,birthday,sentence </line>\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"CSV \ud30c\uc77c\uc744 \ud574\uc11d\ud558\uba74\uc11c \uc77d\ub294 \ucf54\ub4dc\uc774\ub2e4.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { readFileGenerator } from '../fileApi';\nimport { zip } from '../utils';\n\nexport function* csvFileReaderGenerator(filename: string, delim: string = ',') {\n  let header = [];\n\n  for (const line of readFileGenerator(filename)) {\n    if (!header.length) {\n      header = line.split(delim);\n    } else {\n      yield zip(header, line.split(delim));\n    }\n  }\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"readCsv.ts"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { getFileNameAndNumber } from './utils';\nimport { csvFileReaderGenerator } from './csv/csvFileReaderGenerator';\n\nconst [filename] = getFileNameAndNumber('./data/fake-10000.csv', 1);\n\nlet line = 1;\n\nfor (const object of csvFileReaderGenerator(filename)) {\n  console.log(`[${line++}] ${JSON.stringify(object)}`);\n}\n\nconsole.log('\\n read complete.');\n")),(0,i.kt)("h2",{id:"-\ubabd\uace0db\uc5d0-\ub370\uc774\ud130-\uc800\uc7a5\ud558\uae30"},"\ud83e\udd84 \ubabd\uace0DB\uc5d0 \ub370\uc774\ud130 \uc800\uc7a5\ud558\uae30"),(0,i.kt)("h3",{id:"-\ubabd\uace0db\uc5d0-\uc811\uc18d\ud558\uae30"},"\ud83d\udcda \ubabd\uace0DB\uc5d0 \uc811\uc18d\ud558\uae30"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"mongodb \ud328\ud0a4\uc9c0\uac00 \uc81c\uacf5\ud558\ub294 MongoClient \uac1d\uccb4\uc758 ",(0,i.kt)("inlineCode",{parentName:"li"},"connect")," \ud568\uc218\ub97c \uc0ac\uc6a9\ud558\uc5ec \ubabd\uace0DB\uc5d0 \uc811\uc18d")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { MongoClient } from 'mongodb';\n\nexport const connect = (mongoUrl: string = 'mongodb://localhost:27017') => MongoClient.connect(mongoUrl, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true,\n});\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\uc815\uc0c1 \uc5f0\uacb0")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { connect } from '../mongodb/connect';\n\nconst connectTest = async () => {\n  let connection;\n\n  try {\n    connection = await connect();\n    console.log('connection OK.', connection);\n  } catch (error) {\n    console.log(error.message);\n  } finally {\n    connection.close();\n  }\n};\n\nconnectTest();\n")),(0,i.kt)("h3",{id:"-\ub370\uc774\ud130\ubca0\uc774\uc2a4-\uc5f0\uacb0"},"\ud83d\udcda \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const db = await connection.db('ch12-2');\n")),(0,i.kt)("h3",{id:"-\uceec\ub809\uc158\uc744-\uc0dd\uc131"},"\ud83d\udcda \uceec\ub809\uc158\uc744 \uc0dd\uc131"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const personsCollection = db.collection('persons');\nconst addressesCollection = db.collection('addresses');\n")),(0,i.kt)("h3",{id:"-\ubb38\uc11c\ub97c-\uceec\ub809\uc158\uc5d0-\uc800\uc7a5\ud558\uae30"},"\ud83d\udcda \ubb38\uc11c\ub97c \uceec\ub809\uc158\uc5d0 \uc800\uc7a5\ud558\uae30"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const personsCollection = db.collection('persons');\nconst person = { name: 'Jack', age: 32 };\n\nlet result = await personsCollection.insertOne(person);\n")),(0,i.kt)("h3",{id:"-\ubb38\uc11c-\ucc3e\uae30-\ubb38\uc11c-\uc0ad\uc81c\ud558\uae30-\uac80\uc0c9-\uacb0\uacfc-\uc815\ub82c"},"\ud83d\udcda \ubb38\uc11c \ucc3e\uae30, \ubb38\uc11c \uc0ad\uc81c\ud558\uae30, \uac80\uc0c9 \uacb0\uacfc \uc815\ub82c"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"\ubb38\uc11c \ucc3e\uae30")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"// name \uc18d\uc131\uac12\uc774 Jack\uc778 \ubb38\uc11c \ucc3e\uae30\nconst cursor = personsCollection.find({ name: 'Jack' });\n// \uc804\uccb4\nconst cursor = personsCollection.find({});\n")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"\uc870\uac74\uc5d0 \ub9de\ub294 \ubb38\uc11c \ud558\ub098\ub9cc \ucc3e\uae30")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const result = await personsCollection.findOne({ _id });\n")),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"\ubb38\uc11c \uc0ad\uc81c\ud558\uae30")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"let result = await personsCollection.deleteOne({ name: 'Tom' });\nresult = await personsCollection.deleteMany({});\n")),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},"\uac80\uc0c9 \uacb0\uacfc \uc815\ub82c\ud558\uae30")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"const cursor = personsCollection.find({ name: 'Jack' }).sort({ age: -1 });\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\uceec\ub809\uc158\uc5d0 \ubb38\uc11c \uac1c\uc218\uac00 \ub9ce\uc544\uc9c0\uba74 \uac80\uc0c9 \uc2dc\uac04\uc774 \ub290\ub824\uc9c0\ub294\ub370, \uc774\ub97c \ubc29\uc9c0\ud558\uae30 \uc704\ud574 \uceec\ub809\uc158\uc5d0 \uc778\ub371\uc2a4\ub97c \ub9cc\ub4e4\uac8c \ub41c\ub2e4.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"// 1: \uc624\ub984\ucc28\uc21c, -1: \ub0b4\ub9bc\ucc28\uc21c\nawait personsCollection.createIndex({ name: 1, age: -1 });\n")),(0,i.kt)("h3",{id:"-csv-\ud30c\uc77c-\ubabd\uace0db\uc5d0-\uc800\uc7a5\ud558\uae30"},"\ud83d\udcda CSV \ud30c\uc77c \ubabd\uace0DB\uc5d0 \uc800\uc7a5\ud558\uae30"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\ub2e4\uc74c \ucf54\ub4dc\ub294 CSV \ud30c\uc77c\uc744 \uc77d\uc5b4\uc11c ",(0,i.kt)("inlineCode",{parentName:"li"},"users"),"\ub77c\ub294 \uceec\ub809\uc158\uc5d0 \ub370\uc774\ud130\ub97c \ub2f4\uace0, ",(0,i.kt)("inlineCode",{parentName:"li"},"birthday"),"\uc640 ",(0,i.kt)("inlineCode",{parentName:"li"},"name")," \uc18d\uc131\uc5d0 \uc778\ub371\uc2a4\ub97c \uc0dd\uc131\ud558\ub294 \ub0b4\uc6a9\uc744 \uad6c\ud604\ud55c \uc608\uc774\ub2e4.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { connect } from './mongodb/connect';\nimport { csvFileReaderGenerator } from './csv/csvFileReaderGenerator';\nimport { getFileNameAndNumber } from './utils';\n\nconst insertCsvToMongo = async (csvFilename, collectionName, index) => {\n  let connection;\n\n  try {\n    connection = await connect();\n    const db = await connection.db('ch12-2');\n    const collection = db.collection(collectionName);\n    await collection.deleteMany({});\n    await collection.createIndex(index);\n\n    let line = 1;\n\n    for (const object of csvFileReaderGenerator(csvFilename)) {\n      await collection.insertOne(object);\n      console.log(`${line++} inserted.`);\n    }\n\n    console.log('\\n insertion complete.');\n  } catch (error) {\n    console.log(error.message);\n  } finally {\n    connection.close();\n  }\n};\n\nconst [filename] = getFileNameAndNumber('./data/fake-1000.csv', 1);\ninsertCsvToMongo(filename, 'users', { birthday: -1, name: 1 });\n")),(0,i.kt)("h3",{id:"-limit\uc640-skip-\uba54\uc11c\ub4dc"},"\ud83d\udcda limit\uc640 skip \uba54\uc11c\ub4dc"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"users")," \uceec\ub809\uc158\uc758 \ub370\uc774\ud130 \uc911\uc5d0\uc11c \ub2e4\uc12f \uac74\uc744 \uc5bb\uc5b4\uc640 ",(0,i.kt)("inlineCode",{parentName:"li"},"name"),"\uacfc ",(0,i.kt)("inlineCode",{parentName:"li"},"birthday")," \uc18d\uc131\uac12\ub9cc \ud654\uba74\uc5d0 \ucd9c\ub825\ud558\ub294 \ub0b4\uc6a9\uc774\ub2e4.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { connect } from './mongodb/connect';\nimport { IFake } from './fake/IFake';\n\nconst findLimitSkip = async () => {\n  let connection;\n\n  try {\n    connection = await connect();\n    const db = await connection.db('ch12-2');\n    const usersCollection = db.collection('users');\n\n    const cursor = await usersCollection.find({})\n      .sort({ birthday: -1, name: 1 })\n      .skip(100)\n      .limit(5);\n\n    const result = await cursor.toArray();\n\n    console.log(result.map((user: IFake) => ({\n      name: user.name,\n      birthday: user.birthday,\n    })));\n  } catch (error) {\n    console.log(error.message);\n  } finally {\n    connection.close();\n  }\n};\n\nfindLimitSkip();\n")),(0,i.kt)("h2",{id:"-\uc775\uc2a4\ud504\ub808\uc2a4\ub85c-api-\uc11c\ubc84-\ub9cc\ub4e4\uae30"},"\ud83e\udd84 \uc775\uc2a4\ud504\ub808\uc2a4\ub85c API \uc11c\ubc84 \ub9cc\ub4e4\uae30"),(0,i.kt)("h3",{id:"-\uc775\uc2a4\ud504\ub808\uc2a4-\ud504\ub808\uc784\uc6cc\ud06c"},"\ud83d\udcda \uc775\uc2a4\ud504\ub808\uc2a4 \ud504\ub808\uc784\uc6cc\ud06c"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\uc775\uc2a4\ud398\uc774\uc2a4 \ud504\ub808\uc784\uc6cc\ud06c\ub97c \uc0ac\uc6a9\ud558\uba74 \ub2e4\uc74c \ucf54\ub4dc\ucc98\ub7fc \uc6f9 \uc11c\ubc84\ub97c \uc27d\uac8c \ub9cc\ub4e4 \uc218 \uc788\ub2e4.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import express from 'express';\n\nconst app = express();\nconst port = 4000;\n\napp\n  .get('/', (req, res) => res.json({ message: 'Hello world!' }))\n  .listen(port, () => console.log(`http://localhost:${port} started...`));\n")),(0,i.kt)("h3",{id:"-\ub77c\uc6b0\ud305-\uae30\ub2a5-\uad6c\ud604"},"\ud83d\udcda \ub77c\uc6b0\ud305 \uae30\ub2a5 \uad6c\ud604"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import express from 'express';\n\nconst app = express();\nconst port = 4000;\n\napp\n  .get('/', (req, res) => res.json({ message: 'Hello world!' }))\n  .get('/users/:skip/:limit', (req, res) => {\n    const { skip, limit } = req.params;\n\n    res.json({ skip, limit });\n  })\n  .listen(port, () => console.log(`http://localhost:${port} started...`));\n")),(0,i.kt)("h3",{id:"-\uc775\uc2a4\ud504\ub808\uc2a4-\ubbf8\ub4e4\uc6e8\uc5b4-\ucd94\uac00"},"\ud83d\udcda \uc775\uc2a4\ud504\ub808\uc2a4 \ubbf8\ub4e4\uc6e8\uc5b4 \ucd94\uac00"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"REST \ubc29\uc2dd\uc758 API \uc11c\ubc84\ub4e4\uc740 \uc6f9 \ud398\uc774\uc9c0\uc758 \ubcf8\ubb38 \ub0b4\uc6a9\uc744 \ubd84\uc11d\ud558\ub824\uace0 \ud560 \ub54c ",(0,i.kt)("inlineCode",{parentName:"li"},"bodyParser"),"\uc640 ",(0,i.kt)("inlineCode",{parentName:"li"},"cors"),"\ub77c\ub294 \ud328\ud0a4\uc9c0\ub97c ",(0,i.kt)("inlineCode",{parentName:"li"},"use")," \uba54\uc11c\ub4dc\ub97c \uc0ac\uc6a9\ud574 \ub2e4\uc74c\ucc98\ub7fc \uc791\uc131\ud574\uc57c \ud55c\ub2e4.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import bodyParser from 'body-parser';\nimport cors from 'cors';\n\napp\n  .use(bodyParser.urlencoded({ extended: true }))\n  .use(cors())\n")),(0,i.kt)("h3",{id:"-\ubabd\uace0db-\uc5f0\uacb0"},"\ud83d\udcda \ubabd\uace0DB \uc5f0\uacb0"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\ubabd\uace0DB \uc11c\ubc84\uc5d0 \uc811\uc18d\ud558\ub294 \ucf54\ub4dc")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { runServer } from './runServer';\nimport { connect } from './mongodb/connect';\n\nconnect()\n  .then(async (connection) => {\n    const db = await connection.db('ch12-2');\n    return db;\n  })\n  .then(runServer)\n  .catch((e: Error) => console.log(e.message));\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"runServer.ts"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import cors from 'cors';\nimport express from 'express';\nimport bodyParser from 'body-parser';\n\nexport const runServer = (mongodb) => {\n  const app = express();\n  const port = 4000;\n\n  app\n    .use(bodyParser.urlencoded({ extended: true }))\n    .use(cors())\n    .get('/', (req, res) => res.json({ message: 'Hello world!' }))\n    .get('/users/:skip/:limit', async (req, res) => {\n      const { skip, limit } = req.params;\n\n      const usersCollection = await mongodb.collection('users');\n      const cursor = await usersCollection\n        .find({})\n        .sort({ name: 1 })\n        .skip(parseInt(skip, 10))\n        .limit(parseInt(limit, 10));\n\n      const result = await cursor.toArray();\n\n      res.json(result);\n    })\n    .listen(port, () => console.log(`http://localhost:${port} started...`));\n};\n")),(0,i.kt)("h2",{id:"-\ub9ac\uc561\ud2b8\uc640-\ubd80\ud2b8\uc2a4\ud2b8\ub7a9\uc73c\ub85c-\ud504\ub7f0\ud2b8\uc5d4\ub4dc-\uc6f9-\ub9cc\ub4e4\uae30"},"\ud83e\udd84 \ub9ac\uc561\ud2b8\uc640 \ubd80\ud2b8\uc2a4\ud2b8\ub7a9\uc73c\ub85c \ud504\ub7f0\ud2b8\uc5d4\ub4dc \uc6f9 \ub9cc\ub4e4\uae30"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"./frontend")," \ud3f4\ub354 \ucc38\uace0")),(0,i.kt)("h3",{id:"-apptsx-\ud30c\uc77c-\uc218\uc815"},"\ud83d\udcda App.tsx \ud30c\uc77c \uc218\uc815"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"import React from 'react';\n\nconst App: React.FC = () => {\n  const user = {\n    name: 'Jack',\n    age: 32,\n  }\n\n  return (\n    <div className=\"App\">{\n      JSON.stringify(user)\n    }</div>\n  )\n}\n\nexport default App;\n")),(0,i.kt)("h3",{id:"-api-\uc11c\ubc84\uc5d0\uc11c-\uc2e4\uc81c-\ub370\uc774\ud130-\uac00\uc838\uc624\uae30"},"\ud83d\udcda API \uc11c\ubc84\uc5d0\uc11c \uc2e4\uc81c \ub370\uc774\ud130 \uac00\uc838\uc624\uae30"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"export interface IUser {\n  _id: string;\n  name: string;\n  email: string;\n  sentence: string;\n  profession: string;\n  birthday: string;\n}\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"getDataPromise.ts"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts"},"import { IUser } from './IUser';\n\ntype GetDataPromiseCallback = (a: IUser[]) => void;\n\nexport const getDataPromise =  (fn: GetDataPromiseCallback) => (\n  skip: number,\n  limit: number,\n) => fetch(`http://localhost:4000/users/${skip}/${limit}`)\n      .then((res) => res.json())\n      .then(fn);\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"App.tsx"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"import React, { useState, useEffect } from 'react';\n\nimport { getDataPromise } from './getDataPromise';\nimport { IUser } from './IUser';\n\nconst App: React.FC = () => {\n  const [users, setUsers] = useState<IUser[]>([]);\n\n  useEffect(() => {\n    getDataPromise((receivedUsers: IUser[]) => {\n      setUsers([...users, ...receivedUsers]);\n    })(0, 1);\n  }, []);\n\n  return (\n    <div className=\"App\">{JSON.stringify(users)}</div>\n  )\n}\n\nexport default App;\n")),(0,i.kt)("h3",{id:"-\uc11c\ubc84\uc5d0\uc11c-\ub370\uc774\ud130-\uacc4\uc18d-\uac00\uc838\uc624\uae30"},"\ud83d\udcda \uc11c\ubc84\uc5d0\uc11c \ub370\uc774\ud130 \uacc4\uc18d \uac00\uc838\uc624\uae30"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"import React, { useState, useEffect } from 'react';\n\nimport { getDataPromise } from './getDataPromise';\nimport { IUser } from './IUser';\n\nconst App: React.FC = () => {\n  const [skip, setSkip] = useState(0);\n  const [users, setUsers] = useState<IUser[]>([]);\n\n  const limit = 1;\n  const onClick = () => {\n    getDataPromise((receivedUsers: IUser[]) => {\n      setSkip(skip + limit);\n      setUsers([...users, ...receivedUsers]);\n    })(skip, limit);\n  }\n  useEffect(onClick, []);\n\n  return (\n    <div className=\"App\">\n      <p>\n        <button onClick={onClick}>more data...</button>\n      </p>\n      <p>{JSON.stringify(users)}</p>\n    </div>\n  )\n}\n\nexport default App;\n")),(0,i.kt)("h3",{id:"-\ubd80\ud2b8\uc2a4\ud2b8\ub7a9-css-\ud504\ub808\uc784\uc6cc\ud06c-\uc0ac\uc6a9\ud558\uae30"},"\ud83d\udcda \ubd80\ud2b8\uc2a4\ud2b8\ub7a9 CSS \ud504\ub808\uc784\uc6cc\ud06c \uc0ac\uc6a9\ud558\uae30"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://www.bootstrapcdn.com/"},"https://www.bootstrapcdn.com/")),(0,i.kt)("li",{parentName:"ul"},"CSS\uc640 JavaScript Bundle public/index.html\uc5d0 \ucd94\uac00")),(0,i.kt)("h3",{id:"-\uce74\ub4dc-\ucef4\ud3ec\ub10c\ud2b8-\ub9cc\ub4e4\uae30"},"\ud83d\udcda \uce74\ub4dc \ucef4\ud3ec\ub10c\ud2b8 \ub9cc\ub4e4\uae30"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Card.tsx"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},'import React from \'react\';\n\nimport { IUser } from \'./IUser\';\n\nconst random = (max: number) => Math.floor(Math.random() * max);\n\nconst Card: React.FC<{ user: IUser, click: () => void }> = ({user, click}) => {\n  const { name, email, sentence, profession, birthday } = user;\n  const b = new Date(birthday);\n  const src = `https://source.unsplash.com/random/1000x${random(300) + 500}`;\n\n  return (\n    <div className="card">\n      <img src={src} className="card-img-top" />\n      <div className="card-body">\n        <h5 className="card-title">{name}({email})</h5>\n        <h6 className="card-subtitle mb-2 text-muted">\n          {profession} birthday: {b.getFullYear()}\n        </h6>\n        <p className="card-text">{sentence}</p>\n        <a href="#" className="btn btn-primary" onClick={click}>more data...</a>\n      </div>\n    </div>\n  );\n};\n\nexport default Card;\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"App.tsx")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"import React, { useState, useEffect } from 'react';\n\nimport { getDataPromise } from './getDataPromise';\nimport { IUser } from './IUser';\n\nimport Card from './Card';\n\nconst App: React.FC = () => {\n  const [skip, setSkip] = useState(0);\n  const [users, setUsers] = useState<IUser[]>([]);\n\n  const limit = 1;\n  const onClick = () => {\n    getDataPromise((receivedUsers: IUser[]) => {\n      setSkip(skip + limit);\n      setUsers([...users, ...receivedUsers]);\n    })(skip, limit);\n  }\n  useEffect(onClick, []);\n\n  return (\n    <div className=\"App\">\n      {users.map((user: IUser, key: number) => (\n        <Card click={onClick} user={user} key={key.toString()} />\n      ))}\n    </div>\n  )\n}\n\nexport default App;\n")))}d.isMDXComponent=!0}}]);