<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VJSDQ25SYT"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-VJSDQ25SYT",{})</script><title data-react-helmet="true">✌️ Chapter 9: 비용-효율적인 테스트 디자인하기 | Summary of Books</title><meta data-react-helmet="true" property="og:url" content="https://saseungmin.github.io/reading_books_record_repository/docs/object-oriented/design-in-ruby/chapter-9"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="✌️ Chapter 9: 비용-효율적인 테스트 디자인하기 | Summary of Books"><meta data-react-helmet="true" name="description" content="-  수정하기 쉬운 코드를 작성하는 일은?"><meta data-react-helmet="true" property="og:description" content="-  수정하기 쉬운 코드를 작성하는 일은?"><link data-react-helmet="true" rel="shortcut icon" href="/reading_books_record_repository/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://saseungmin.github.io/reading_books_record_repository/docs/object-oriented/design-in-ruby/chapter-9"><link data-react-helmet="true" rel="alternate" href="https://saseungmin.github.io/reading_books_record_repository/docs/object-oriented/design-in-ruby/chapter-9" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://saseungmin.github.io/reading_books_record_repository/docs/object-oriented/design-in-ruby/chapter-9" hreflang="x-default"><link rel="stylesheet" href="/reading_books_record_repository/assets/css/styles.cefedd52.css">
<link rel="preload" href="/reading_books_record_repository/assets/js/runtime~main.8d5da479.js" as="script">
<link rel="preload" href="/reading_books_record_repository/assets/js/main.26591cb8.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/reading_books_record_repository/"><img src="/reading_books_record_repository/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/reading_books_record_repository/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Summary of Books</b></a><a class="navbar__item navbar__link" href="/reading_books_record_repository/docs/javascript/table-of-contents">자바스크립트</a><a class="navbar__item navbar__link" href="/reading_books_record_repository/docs/typescript/table-of-contents">타입스크립트</a><a class="navbar__item navbar__link" href="/reading_books_record_repository/docs/agile/table-of-contents">애자일</a><a class="navbar__item navbar__link" href="/reading_books_record_repository/docs/object-oriented/table-of-contents">객체지향</a><a class="navbar__item navbar__link" href="/reading_books_record_repository/docs/functional/table-of-contents">함수형</a><a class="navbar__item navbar__link" href="/reading_books_record_repository/docs/clean/table-of-contents">클린코드</a><a class="navbar__item navbar__link" href="/reading_books_record_repository/docs/git/table-of-contents">Git</a><a class="navbar__item navbar__link" href="/reading_books_record_repository/docs/etc/table-of-contents">기타</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/saseungmin/reading_books_record_repository" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/reading_books_record_repository/"><img src="/reading_books_record_repository/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/reading_books_record_repository/img/logo.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Summary of Books</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/reading_books_record_repository/docs/javascript/table-of-contents">자바스크립트</a></li><li class="menu__list-item"><a class="menu__link" href="/reading_books_record_repository/docs/typescript/table-of-contents">타입스크립트</a></li><li class="menu__list-item"><a class="menu__link" href="/reading_books_record_repository/docs/agile/table-of-contents">애자일</a></li><li class="menu__list-item"><a class="menu__link" href="/reading_books_record_repository/docs/object-oriented/table-of-contents">객체지향</a></li><li class="menu__list-item"><a class="menu__link" href="/reading_books_record_repository/docs/functional/table-of-contents">함수형</a></li><li class="menu__list-item"><a class="menu__link" href="/reading_books_record_repository/docs/clean/table-of-contents">클린코드</a></li><li class="menu__list-item"><a class="menu__link" href="/reading_books_record_repository/docs/git/table-of-contents">Git</a></li><li class="menu__list-item"><a class="menu__link" href="/reading_books_record_repository/docs/etc/table-of-contents">기타</a></li><li class="menu__list-item"><a href="https://github.com/saseungmin/reading_books_record_repository" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/reading_books_record_repository/docs/intro">책 목록</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">자바스크립트</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/table-of-contents">🚀 책 목록</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">코어 자바스크립트</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/core-javascript/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/core-javascript/chapter-1">🌈 Chapter 1: 데이터 타입</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/core-javascript/chapter-2">🌈 Chapter 2: 실행 컨텍스트</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/core-javascript/chapter-3">🌈 Chapter 3: this</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/core-javascript/chapter-4">🌈 Chapter 4: 콜백 함수</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/core-javascript/chapter-5">🌈 Chapter 5: 클로저</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/core-javascript/chapter-6">🌈 Chapter 6: 프로토타입</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/core-javascript/chapter-7">🌈 Chapter 7: 클래스</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">자바스크립트 코딩의 기술</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/modern-javascript/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/modern-javascript/chapter-1">1. 변수 할당으로 의도를 하라</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/modern-javascript/chapter-2">2. 배열로 데이터 컬렉션을 관리하라.</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/modern-javascript/chapter-3">3. 특수한 컬렉션을 이용해 코드 명료성을 극대화하라.</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/modern-javascript/chapter-4">4. 조건문을 깔끔하게 작성하라.</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/modern-javascript/chapter-5">5. 반복문을 단순하게 만들어라.</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/modern-javascript/chapter-6">6. 매개변수와 return 문을 정리하라.</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/modern-javascript/chapter-7">7. 유연한 함수를 만들어라.</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/modern-javascript/chapter-8">8. 클래스로 인터페이스를 간결하게 유지하라.</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/modern-javascript/chapter-9">9. 외부 데이터에 접근하라.</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/modern-javascript/chapter-10">10. 컴포넌트 아키텍처를 이용해 관련 파일을 모아라.</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">자바스크립트 패턴과 테스트</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/javascript-pattern-and-test/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/javascript-pattern-and-test/chapter-1">🌈 Chapter 1: 좋은 소프트웨어 만들기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/javascript-pattern-and-test/chapter-2">🌈 Chapter 2: 도구 다루기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/javascript-pattern-and-test/chapter-3">chapter-3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/javascript-pattern-and-test/chapter-4">🌈 Chapter 4: 패턴이 좋은 점</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/javascript-pattern-and-test/chapter-5">🌈 Chapter 5: 콜백 패턴</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/javascript-pattern-and-test/chapter-6">🌈 Chapter 6: 프라미스 패턴</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/javascript-pattern-and-test/chapter-7">🌈 Chapter 7: 부분 적용 함수</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/javascript-pattern-and-test/chapter-8">🌈 Chapter 8: 메모이제이션 패턴</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/javascript-pattern-and-test/chapter-9">🌈 Chapter 9: 싱글톤 패턴</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/javascript-pattern-and-test/chapter-10">🌈 Chapter 10: 팩토리 패턴</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/javascript/javascript-pattern-and-test/chapter-11">🌈 Chapter 11: 샌드박스 패턴</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">타입스크립트</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/typescript/table-of-contents">🚀 책 목록</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Do it! 타입스크립트 프로그래밍</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/typescript/do-it-typescript/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/typescript/do-it-typescript/chapter-1">1. 타입스크립트와 개발 환경 만들기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/typescript/do-it-typescript/chapter-2">2. 타입스크립트 프로젝트 생성과 관리</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/typescript/do-it-typescript/chapter-3">3. 객체와 타입</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/typescript/do-it-typescript/chapter-4">4. 함수와 메서드</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/typescript/do-it-typescript/chapter-5">5. 배열과 튜플</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/typescript/do-it-typescript/chapter-6">6. 반복기 이해하기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/typescript/do-it-typescript/chapter-7">7. Promise와 async/await 구문</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/typescript/do-it-typescript/chapter-8">8. 함수 조합의 원리와 응용</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/typescript/do-it-typescript/chapter-9">9. 람다 라이브러리</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/typescript/do-it-typescript/chapter-10">10. 제네릭 타입 이해하기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/typescript/do-it-typescript/chapter-11">11. 모나드</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/typescript/do-it-typescript/chapter-12">12. 타입스크립트 함수형 프로그래밍 실습</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">애자일</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/table-of-contents">🚀 책 목록</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">클린 애자일</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/clean-agile/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/clean-agile/chapter-1">👉 Chapter 1: 애자일 소개</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/clean-agile/chapter-2">👉 Chapter 2: 왜 애자일인가</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/clean-agile/chapter-3">👉 Chapter 3: 비즈니스 실천 방법</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/clean-agile/chapter-4">👉 Chapter 4: 팀 실천 방법</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/clean-agile/chapter-5">👉 Chapter 5: 기술 실천 방법</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/clean-agile/chapter-6">👉 Chapter 6: 애자일해지기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/clean-agile/chapter-7">👉 Chapter 7: 장인 정신</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">린 UX</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/lean-ux/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/lean-ux/chapter-1">🌈 왜 린 UX인가?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/lean-ux/chapter-2">🌈 기본 원칙</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/lean-ux/chapter-3">🌈 비전 정의와 실행 계획, 성과</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/lean-ux/chapter-4">🌈 협업기반 디자인</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/lean-ux/chapter-5">🌈 MVP와 실험</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/lean-ux/chapter-6">🌈 조사와 피드백</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/lean-ux/chapter-7">🌈 애자일과 린 UX의 통합</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/lean-ux/chapter-8">🌈 조직 변화 만들기</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">The Nature of Software Development</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-1">1. 가치 찾기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-2">2. 가치, 우리가 원하는 것</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-3">3. 피처 단위 개발을 위한 가이드라인</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-4">4. 피처 단위로 조직 구성하기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-5">5. 피처 단위로 계획하기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-6">6. 피처 단위로 개발하기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-7">7. 피처와 기반을 동시에</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-8">8. 무결점과 견고한 설계</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-9">9. 요약</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-10">10. 가치에 대해서</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-11">11. 가치를 정하는 기준</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-12">12. 물론 힘들 일입니다.</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-13">13. 그리 단순하지 않습니다.</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-14">14. 성장하는 개발팀 만들기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-15">15. 초기 계획을 위한 &#x27;파이브 카드&#x27;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-16">16. 경영진을 위한 소프트웨어 개발의 본질</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-17">17. 더 강한 채찍질</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-18">18. 속도를 내기 위한, 특별한 빌드 기술</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-19">19. 리팩토링</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-20">20. 애자일 방법들</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/nature-of-software-development/chapter-21">21. 애자일 확장</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">함께 자라기</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/growing-up-together/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/growing-up-together/chapter-1">🌈 Chapter 1: 자라기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/growing-up-together/chapter-2">🌈 Chapter 2: 함께</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/agile/growing-up-together/chapter-3">🌈 Chapter 3: 애자일</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">객체지향</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/reading_books_record_repository/docs/object-oriented/table-of-contents">🚀 책 목록</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">객체지향의 사실과 오해</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/facts-and-misunderstandings/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/facts-and-misunderstandings/chapter-1">🌈 Chapter 1: 협력하는 객체들의 공동체</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/facts-and-misunderstandings/chapter-2">🌈 Chapter 2: 이상한 나라의 객체</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/facts-and-misunderstandings/chapter-3">🌈 Chapter 3: 타입과 추상화</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/facts-and-misunderstandings/chapter-4">🌈 Chapter 4: 역할, 책임, 협력</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/facts-and-misunderstandings/chapter-5">🌈 Chapter 5: 책임과 메시지</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/facts-and-misunderstandings/chapter-6">🌈 Chapter 6: 객체 지도</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/facts-and-misunderstandings/chapter-7">🌈 Chapter 7: 함께 모으기</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">오브젝트</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/object/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/object/chapter-1">🌈 Chapter 1: 객체, 설계</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/object/chapter-2">🌈 Chapter 2: 객체지향 프로그래밍</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/object/chapter-3">🌈 Chapter 3: 역할, 책임, 협력</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/object/chapter-4">🌈 Chapter 4: 설계 품질과 트레이드오프</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/object/chapter-5">🌈 Chapter 5: 책임 할당하기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/object/chapter-6">🌈 Chapter 6: 메시지와 인터페이스</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/object/chapter-7">🌈 Chapter 7: 객체 분해</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/object/chapter-8">🌈 Chapter 8: 의존성 관리하기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/object/chapter-9">🌈 Chapter 9: 유연한 설계</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/object/chapter-10">🌈 Chapter 10: 상속과 코드 재사용</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/object/chapter-11">🌈 Chapter 11: 합성과 유연한 설계</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/object/chapter-12">🌈 Chapter 12: 다형성</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/object/chapter-13">🌈 Chapter 13: 서브클래싱과 서브타이핑</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/object/chapter-14">🌈 Chapter 14: 일관성 있는 협력</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/object/chapter-15">🌈 Chapter 15: 디자인 패턴과 프레임워크</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">루비로 배우는 객체지향 디자인</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/reading_books_record_repository/docs/object-oriented/design-in-ruby/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/reading_books_record_repository/docs/object-oriented/design-in-ruby/chapter-1">✌️ Chapter 1: 객체지향 디자인</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/reading_books_record_repository/docs/object-oriented/design-in-ruby/chapter-2">✌️ Chapter 2: 단일 책임 원칙을 따르는 클래스 디자인하기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/reading_books_record_repository/docs/object-oriented/design-in-ruby/chapter-3">✌️ Chapter 3: 의존성 관리하기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/reading_books_record_repository/docs/object-oriented/design-in-ruby/chapter-4">✌️ Chapter 4: 유연한 인터페이스 만들기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/reading_books_record_repository/docs/object-oriented/design-in-ruby/chapter-5">✌️ Chapter 5: 오리 타입으로 비용 줄이기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/reading_books_record_repository/docs/object-oriented/design-in-ruby/chapter-6">✌️ Chapter 6: 상속을 이용해 새로운 행동 얻기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/reading_books_record_repository/docs/object-oriented/design-in-ruby/chapter-7">✌️ Chapter 7: 모듈을 통한 역할 공유</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/reading_books_record_repository/docs/object-oriented/design-in-ruby/chapter-8">✌️ Chapter 8: 조합을 이용해 객체 통합하기</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/reading_books_record_repository/docs/object-oriented/design-in-ruby/chapter-9">✌️ Chapter 9: 비용-효율적인 테스트 디자인하기</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">엘레강트 오브젝트</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/elegant-object/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/elegant-object/chapter-1">🌈 Chapter 1: Birth</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/elegant-object/chapter-2">🌈 Chapter 2: Education</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/elegant-object/chapter-3">🌈 Chapter 3: Employment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/elegant-object/chapter-4">🌈 Chapter 4: Retirement</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">테스트 주도 개발로 배우는 객체 지향 설계와 실천</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-1">1. 테스트 주도 개발의 핵심은 무엇인가?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-2">2. 객체를 활용한 테스트 주도 개발</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-3">3. 도구 소개</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-4">4. 테스트 주도 주기 시작</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-5">5. 테스트 주도 개발 주기의 유지</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-6">6. 객체 지향 스타일</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-7">7. 객체 지향 설계의 달성</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-8">8. 서드 파티 코드를 기반으로 한 개발</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-9">9. 경매 스나이퍼 개발 의뢰</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-10">10. 동작하는 골격</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-11">11. 첫 테스트 통과하기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-12">12. 입찰 준비</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-13">13. 스나이퍼가 입찰하다</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-14">14. 스나이퍼가 경매에서 낙찰하다</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-15">15. 실제 사용자 인터페이스를 향해</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-16">16. 여러 품목에 대한 스나이핑</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-17">17. Main 분석</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-18">18. 세부 사항 처리</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-19">19. 실패 처리</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-20">20. 테스트에 귀 기울이기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-21">21. 테스트 가독성</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-22">22. 복잡한 테스트 데이터 만들기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-23">23. 테스트 진단</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/object-oriented/growing-object-oriented-software-guided-by-tests/chapter-24">24. 테스트 유연성</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">함수형</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/functional/table-of-contents">🚀 책 목록</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">스칼라로 배우는 함수형 프로그래밍</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/functional/in-scala/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/functional/in-scala/chapter-1">🍭 Chapter 1: 함수형 프로그래밍이란 무엇인가?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/functional/in-scala/chapter-2">🍭 Chapter 2: 스칼라로 함수형 프로그래밍 시작하기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/functional/in-scala/chapter-3">🍭 Chapter 3: 함수적 자료구조</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/functional/in-scala/chapter-4">🍭 Chapter 4: 예외를 이용하지 않은 오류 처리</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">함수형 자바스크립트</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/functional/functional-javascript/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/functional/functional-javascript/chapter-1">🌈 Chapter 1: 함수형 길들이기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/functional/functional-javascript/chapter-7">🌈 Chapter 7: 함수형 최적화</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/functional/functional-javascript/chapter-8">🌈 Chapter 8: 비동기 이벤트와 데이터를 관리</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">클린코드</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/clean/table-of-contents">🚀 책 목록</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">클린 코드: 애자일 소프트웨어 장인 정신</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/clean/clean-code/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/clean/clean-code/chapter-1">🍭 Chapter 1: 깨끗한 코드</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/clean/clean-code/chapter-2">🍭 Chapter 2: 의미있는 이름</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/clean/clean-code/chapter-3">🍭 Chapter 3: 함수</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/clean/clean-code/chapter-4">🍭 Chapter 4: 주석</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/clean/clean-code/chapter-5">🍭 Chapter 5: 형식 맞추기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/clean/clean-code/chapter-6">🍭 Chapter 6: 객체와 자료 구조</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/clean/clean-code/chapter-7">🍭 Chapter 7: 오류 처리</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/clean/clean-code/chapter-8">🍭 Chapter 8: 경계</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/clean/clean-code/chapter-9">🍭 Chapter 9: 단위 테스트</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/clean/clean-code/chapter-10">🍭 Chapter 10: 클래스</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/clean/clean-code/chapter-11">🍭 Chapter 11: 시스템</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/clean/clean-code/chapter-12">🍭 Chapter 12: 창발성</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/clean/clean-code/chapter-13">🍭 Chapter 13: 동시성</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Git</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/git/table-of-contents">🚀 책 목록</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">Pro Git 2판</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/git/pro-git-2/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/git/pro-git-2/chapter-1">🌈 Chapter 1: 시작하기</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/git/pro-git-2/chapter-2">🌈 Chapter 2: Git의 기초</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/git/pro-git-2/chapter-3">🌈 Chapter 3: Git 브랜치</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">기타</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/etc/table-of-contents">🚀 책 목록</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">실용주의 프로그래머</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/etc/pragmatic-programmer/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/etc/pragmatic-programmer/chapter-1">🤔 Chapter 1: 실용주의 철학</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/etc/pragmatic-programmer/chapter-2">🤔 Chapter 2: 실용주의 접근법</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/etc/pragmatic-programmer/chapter-3">🤔 Chapter 3: 기본 도구</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/etc/pragmatic-programmer/chapter-4">🤔 Chapter 4: 실용주의 편집증</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/etc/pragmatic-programmer/chapter-5">🤔 Chapter 5: 구부러지거나 부러지거나</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/etc/pragmatic-programmer/chapter-6">🤔 Chapter 6: 동시성</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/etc/pragmatic-programmer/chapter-7">🤔 Chapter 7: 코딩하는 동안</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/etc/pragmatic-programmer/chapter-8">🤔 Chapter 8: 프로젝트 전에</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/etc/pragmatic-programmer/chapter-9">🤔 Chapter 9: 실용주의 프로젝트</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">인스파이어드</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/etc/inspired/table-of-contents">🚀 목차</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/reading_books_record_repository/docs/etc/inspired/part-1">👉 Part 1. 최고의 기술 기업에서 배운 것</a></li></ul></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">✌️ Chapter 9: 비용-효율적인 테스트 디자인하기</h1></header><ul><li>수정하기 쉬운 코드를 작성하는 일은?<ul><li>객체지향 디자인을 이해하고 있어야 한다.</li><li>코드를 리팩터링하는 법을 익혀야 한다. (<strong>코드의 외적인 작동방식을 변경하지 않으면서</strong>) </li><li>수정 가능한 코드를 작성하려면 높은 수준의 테스트를 짤 수 있어야 한다.</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-의도를-가지고-테스트하기"></a>📚 의도를 가지고 테스트하기<a class="hash-link" href="#-의도를-가지고-테스트하기" title="Direct link to heading">#</a></h2><ul><li>테스트는 버그를 줄여주고 문서의 역할을 하며 테스트를 먼저 작성하면 애플리케이션의 디자인이 향상된다.</li><li>진정한 테스트의 목표는 디자인의 진정한 목표와 똑같이, 코드 작성 비용을 줄이는 것이다.</li><li>테스트 코드를 디자인하는 데 드는 시간보다 오래 걸린다면 테스트를 작성하는 의미가 없지만, 테스트 작성 비용이 너무 높은 문제를 해결하기 위한 방법은 테스트를 그만두는 것이 아니라 테스트를 더 잘 짤 수 있도록 수련하는 것이다.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-테스트-의도를-알기"></a>🎈 테스트 의도를 알기<a class="hash-link" href="#-테스트-의도를-알기" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-버그-찾아내기"></a>🐤 버그 찾아내기<a class="hash-link" href="#-버그-찾아내기" title="Direct link to heading">#</a></h4><ul><li>초기 단계에서 버그를 발견하기도 쉽고 수정하기도 쉬울 뿐 아니라 코드를 일찍 올바르게 만들어 놓는 것이 코드 디자인에 긍정적인 영향을 미친다.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-문서를-제공하기"></a>🐤 문서를 제공하기<a class="hash-link" href="#-문서를-제공하기" title="Direct link to heading">#</a></h4><ul><li>테스트만이 디자인에 대한 믿을 수 있는 문서를 제공한다.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-디자인-결정을-미루기"></a>🐤 디자인 결정을 미루기<a class="hash-link" href="#-디자인-결정을-미루기" title="Direct link to heading">#</a></h4><ul><li>테스트는 디자인 결정을 안전하게 미룰 수 있도록 해준다.</li><li><strong>어떤 것</strong>이 필요한데 아직 그 무엇을 알아내기에는 충분한 정보가 없는 경우가 있다.</li><li>테스트가 인터페이스에 기대고 있다면 인터페이스 밑에 숨겨진 구체적인 코드는 나중에 리팩터링할 수 있다.</li><li>테스트는 인터페이스가 계속해서 올바르게 작동하고 있다는 점을 확인해 줄 수 있고 리팩터링 과정에서 테스트를 다시 작성할 필요도 없다.</li><li>의도적으로 인터페이스에 의존하는 테스트를 작성하면 아무런 대가를 치르지 않고도 안전하게 디자인 결정을 미룰 수 있다.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-추상화를-돕기"></a>🐤 추상화를 돕기<a class="hash-link" href="#-추상화를-돕기" title="Direct link to heading">#</a></h4><ul><li>좋은 디자인은 추상화된 코드에 기대고 있는 작고 독립적인 객체들을 자연스럽게 만들어낸다. 이런 추상화들 사이의 상호작용으로 조금씩 변해간다.</li><li>추상화된 디자인이 어느 순간에 도달하면, 테스트 없이는 더 이상 안전하게 코드를 수정할 수 없는 수준에 도달한다.</li><li>테스트는 모든 추상화된 인터페이스의 기록이기 때문에 우리의 작업을 지지해주는 기반이 된다.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-디자인의-결점-드러내기"></a>🐤 디자인의 결점 드러내기<a class="hash-link" href="#-디자인의-결점-드러내기" title="Direct link to heading">#</a></h4><ul><li>테스트를 작성하기 위한 준비 작업이 너무 힘겹다면 코드에 너무 많은 맥락(context)이 있다는 뜻이다.</li><li>객체 하나를 테스트하기 위해 다른 객체를 많이 끌어와야 한다면 이 코드는 의존성이 높다는 뜻이다. 디자인이 나쁠 때 테스트는 힘들어진다.</li><li>하지만, 테스트가 힘들다고 해서 애플리케이션의 디자인에 문제가 있다는 뜻은 아니다.</li><li>최소한의 비용으로 테스트가 제공하는 이점을 최대한으로 누리는 것이고 이걸 이루기 위해서는 느슨하게 결합된 테스트를 작성하는 것이다.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-무엇을-테스트할지-알기"></a>🎈 무엇을 테스트할지 알기<a class="hash-link" href="#-무엇을-테스트할지-알기" title="Direct link to heading">#</a></h3><ul><li>테스트에서 더 나은 가치를 얻기 위한 방법 중 하나는 테스트를 덜 짜는 것이다. 이를 위해서는 모든 것을 단 한번만 테스트하고 제대로 된 곳에서 테스트해야 한다.</li><li>테스트에서 중복을 제거하면 애플리케이션이 수정에 맞춰 테스트를 수정해야 하는 비용을 줄일 수 있다.</li><li>테스트의 핵심내용만 남겨 놓기 위해서는 테스트의 의도를 매우 뚜렷하게 가지고 있어야 하고 이 의도는 우리가 이미 알고 있는 디자인 원칙으로부터 끄집어 낼 수 있다.</li><li>디자인의 핵심은 다른 객체의 내부에 대한 의도적인 무지에 있고 객체를 그저 메시지에 반응하는 존재처럼 취급할 때 애플리케이션의 수정이 쉬워진다. 그래야 최소한의 비용으로 최대한의 이득을 제공하는 테스트를 작성할 수 있다.</li><li><strong>모든 객체에서 가장 안정적인 것은 퍼블릭 인터페이스로 우리가 테스트하는 것은 퍼블릭 인터페이스에서 정의된 메시지이다.</strong></li><li><strong>가장 비효율적인 것은 불필요한 테스트는 객체를 감싸는 방어막을 뚫고 들어가서 객체 내부의 불안정한 세부사항을 테스트하는 것이다.</strong> 리팩토링시 유지보수 비용만 높이게 된다.</li><li>그렇기 때문에 테스트는 객체의 경계를 넘나드는 메시지에 집중해야 한다.</li><li>객체는 오직 자신의 퍼블릭 인터페이스에 속하는 메시지의 상태만 검증해야 한다.</li><li>들어오는 메시지에 대해서는 메시지가 반환하는 상태를 테스트한다. 밖으로 나가는 커맨드 메시지(다른 객체에 영향을 미치는 메시지)에 대해서는 이 메시지가 제대로 전송되었는지 테스트해야 한다. 밖으로 나가는 쿼리 메시지는 테스트할 필요가 없다.</li><li>밖으로 커멘드 메시지가 제대로 전송되었는지만 테스트한다면 실제 코드와 느슨하게 결합되어 있기 때문에 실제 코드가 변경되어도 테스트를 수정할 필요가 없다.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-언제-테스트할지-알기"></a>🎈 언제 테스트할지 알기<a class="hash-link" href="#-언제-테스트할지-알기" title="Direct link to heading">#</a></h3><ul><li>테스트를 먼저 작성하는 것이 좋다. 테스트를 먼저 작성하면 객체를 처음 만드는 순간부터 객체 속에 약간의 재사용 가능성을 각인시켜 놓게 된다.</li><li>제대로 된 시점에 적당한 양의 테스트를 작성한다면, 그리고 테스트를 먼저 작성한다면 전체적인 개발비용을 줄일 수 있다. 그렇기 때문에 객체지향 디자인의 원칙을 테스트에서도 적용해야 한다.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-어떻게-테스트할지-알기"></a>🎈 어떻게 테스트할지 알기<a class="hash-link" href="#-어떻게-테스트할지-알기" title="Direct link to heading">#</a></h3><ul><li>가장 대중적인 테스트 프레임워크 사용하기. 사용자층이 두텁기 때문에 하위호환성을 포기할 수 없고, 덕분에 기존 테스트를 모두 재작성해야하는 변경사항이 적용될 여지가 적다.</li><li>어떤 프레임워크를 선택할지 뿐만 아니라, 서로 다른 두 가지 스타일인, 테스트 주도 개발(TDD)와 행동 주도 개발(BDD) 사이에서도 고민하고 결정해야 한다. 각자의 경험과 각자의 보다 중요하게 생각하는 가치에 준해 결정한다.</li><li>두 스타일 모두 테스트를 먼저 작성하지만 BDD는 밖에서 안으로, TDD는 안에서 밖으로 나가는 접근을 취한다. 보통 도메인 객체에 대한 테스트로 시작해서, 이렇게 만든 도메인 객체를 재사용하면서 바로 바깥 층위인 테스트 코드를 작성한다.</li><li>테스트를 할 땐 테스트 중인 객체를 알아야 하지만 그 이외의 객체에 대해서는 최대한 무지해야 한다.</li><li>테스트 중인 객체에만 초점을 맞추고 테스트를 진행하려면, 테스트하는 관점을 선택해야 한다. <strong>테스트는 테스트 중인 객체의 가장자리를 따라 시선을 고정하고 그 경계를 넘나드는 메시지만 알고 있는 편이 낫다.</strong></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-들어오는-메시지-테스트하기"></a>📚 들어오는 메시지 테스트하기<a class="hash-link" href="#-들어오는-메시지-테스트하기" title="Direct link to heading">#</a></h2><ul><li>들어오는 메시지들은 객체의 퍼블릭 인터페이스, 다시 말해 객체가 외부 세계에 보여지는 모습을 형성한다.</li><li>애플리케이션의 다른 객체들은 이 메시지의 시그니처와 그 반환 결과에 의존하고 있기 때문에 이 메시지들은 테스트해야 한다.</li><li>다음은 3장의 코드이다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class Gear</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  attr_reader :chainring :cog, :rim, :tire</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def initialize(args)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @chainring = args[:chainring]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @cog = args[:cog]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @rim = args[:rim]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @tire = args[:tire]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def ratio</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    chainring / cog.to_f</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def gear_inches</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ratio * Wheel.new(rim, tire).diameter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class Wheel</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  attr_reader :rim, :trie</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def initialize(rim, tire)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @rim = rim</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @tire = tire</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def diameter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    rim + (tire * 2)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li><code>Wheel</code>은 들어오는 메시지 <code>diameter</code>에 반응한다. (이 메시지는 <code>Gear</code>가 전송한 메시지 또는 <code>Gear</code>에서 밖으로 나온 메시지이다.) 그리고 <code>Gear</code>는 두 개의 들어오는 메시지, <code>gear_inches</code>와 <code>ratio</code>에 반응한다.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-사용하지-않는-인터페이스-제거하기"></a>🎈 사용하지 않는 인터페이스 제거하기<a class="hash-link" href="#-사용하지-않는-인터페이스-제거하기" title="Direct link to heading">#</a></h3><ul><li>들어오는 메시지가 딸린 객체를 가지고 있지 않다면 이 메시지는 테스트할 필요가 없다.</li></ul><table><thead><tr><th align="center">객체</th><th align="center">들어오는 메시지들</th><th align="center">밖으로 나가는 메시지들</th><th align="center">메시지에 의존하는 객체가 있는가?</th></tr></thead><tbody><tr><td align="center"><code>Wheel</code></td><td align="center"><code>diameter</code></td><td align="center"></td><td align="center">Yes</td></tr><tr><td align="center"><code>Gear</code></td><td align="center"></td><td align="center"><code>diameter</code></td><td align="center">No</td></tr><tr><td align="center"></td><td align="center"><code>gear_inches</code></td><td align="center"></td><td align="center"></td></tr><tr><td align="center"></td><td align="center"><code>ratio</code></td><td align="center"></td><td align="center"></td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-퍼블릭-인터페이스-검증하기"></a>🎈 퍼블릭 인터페이스 검증하기<a class="hash-link" href="#-퍼블릭-인터페이스-검증하기" title="Direct link to heading">#</a></h3><ul><li>들어오는 메시지들은 메시지가 반환하는 값이나 상태를 검증하는 방식으로 테스트한다.</li><li>들어오는 메시지를 테스트하는 첫 번째 단계는 여러 상황에서 언제나 올바른 값을 반환하는지 확인하는 것이다. </li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class WheelTest &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_calculates_diameter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    wheel = Wheel.new(26, 1.5)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_in_delta(29, wheel.diameter, 0.01) # 29가 맞는지 검증하는 테스트</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>위 테스트를 위해 애플리케이션의 다른 객체를 생성해야 하는 번거로움도 없고, 독립적으로 테스트할 수 있다.</li><li>다음 코드는 <code>Gear</code>를 테스트하는 것이다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class GearTest &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_calculates_gear_inches</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    gear = Gear.new(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      chainring: 52,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      cog: 11,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      rim: 26,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      tire: 1.5</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_in_delta(137.1, gear.gear_inches, 0.01)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li><code>Gear</code>의 <code>gear_inches</code> 메서드는 무조건 새로운 객체 <code>Wheel</code>을 만들고 사용한다. <code>Gear</code>와 <code>Wheel</code>의 코드에서 그리고 테스트에서도 서로 결합되어 있다. 때문에 수정이 발생했을 때 이 테스트가 고장 날 가능성이 얼마나 높을지를 결정한다. 하지만 이런 문제를 야기하는 결합은 <code>Gear</code> 안쪽 깊은 곳에 숨어 있기 때문에 테스트를 통해서 그 내용을 파악할 수 없다.</li><li>테스트가 최소한의 코드만을 실행할 때 그리고 테스트가 호출하는 외부 코드가 디자인과 직접적으로 연관되어 있을 때 테스트는 빠르게 실행된다.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-테스트-중인-객체-고립시키기"></a>🎈 테스트 중인 객체 고립시키기<a class="hash-link" href="#-테스트-중인-객체-고립시키기" title="Direct link to heading">#</a></h3><ul><li><code>gear_inches</code>가 <code>Gear</code> 이외의 객체에 기대고 있다는 사실이다. 이 사실은 <code>Gear</code>를 톡립적으로 테스트할 수 없다는 사실이다. <code>Gear</code>가 특정한 맥락이 묶여 있고, <code>Gear</code>를 재사용하기 어렵다는 것을 말해준다.</li><li>아래는 <code>Gear</code>에서 <code>Wheel</code>을 만드는 부분을 제거해서 이런 결합을 깨뜨렸다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class Gear</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  attr_reader :chainring :cog, :wheel</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def initialize(args)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @chainring = args[:chainring]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @cog = args[:cog]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @wheel = args[:wheel]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def ratio</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    chainring / cog.to_f</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def gear_inches</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ratio * wheel.diameter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>이러한 결과에서 <code>diameter</code> 메서드는 특정 역할의 퍼블릭 인터페이스를 이루고 있다.</li><li>입력받는 객체의 클래스에 얽매이지 않고 보다 자유롭게 사고할 수 있을 때 더욱 다양한 디자인과 테스트를 시도해 볼 수 있다.</li><li>테스트 단계에서도 <code>Wheel</code> 인스턴스를 주입하는 것을 통해 실제 코드의 변경사항을 테스트에 반영하고 있다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class GearTest &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_calculates_gear_inches</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    gear = Gear.new(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      chainring: 52,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      cog: 11,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      wheel: Wheel.new(26, 1.5)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_in_delta(137.1, gear.gear_inches, 0.01)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>테스트 코드에서도 <code>Gear</code>가 <code>Wheel</code>을 사용한다는 점이 명확해졌다. 공개적으로 드러나게 되었다.</li><li>또한 여기서 <code>Wheel</code>이 <code>diameter</code>의 역할을 수행하고 있다는 것 역시 명확히 드러나지 않았다. 역할이 눈에 보이지도 않고 <code>Gear</code>는 <code>Wheel</code>과 결합되어 있지만 테스트를 이런 방식으로 작성하는 것은 명백한 이점을 하나 가지고 있다.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-클래스를-사용해서-의존성-주입하기"></a>🎈 클래스를 사용해서 의존성 주입하기<a class="hash-link" href="#-클래스를-사용해서-의존성-주입하기" title="Direct link to heading">#</a></h3><ul><li>다음은 <code>Wheel</code> 클래스의 <code>diameter</code> 메서드의 이름을 <code>width</code>로 변경했다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class Wheel</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  attr_reader :rim, :trie</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def initialize(rim, tire)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @rim = rim</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @tire = tire</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def width # 변경</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    rim + (tire * 2)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li><code>Gear</code> 태스트는 <code>Wheel</code> 인스턴스를 주입하고 있고 이 <code>Wheel</code>은 <code>width</code>를 구현하고 있다고 가정한다. 그런데 <code>Gear</code>는 여전히 <code>diameter</code> 메시지를 전송한다고 가정하면 테스트는 당연히 실패한다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Gear</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  ERROR test_calculates_gear_inches</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    undefined method &#x27;diameter&#x27;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>이러한 실패는 이해하기 쉽다. 코드가 매우 구체적이기 때문에 테스트 역시 간단하고 실패의 원인도 명확하다. 그렇기 때문에 이 테스트는 바로 이 특정한 경우에만 제대로 작동한다.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-역할에-대한-의존성-주입하기"></a>🎈 역할에 대한 의존성 주입하기<a class="hash-link" href="#-역할에-대한-의존성-주입하기" title="Direct link to heading">#</a></h3><ul><li>위 코드에는 객체가 <code>Diameterizable</code>에 대한 지식이 의존하는 곳이 두 군데 있다.</li><li>첫째, <code>Gear</code>는 자신이 <code>Diameterizable</code>의 인터페이스를 알고 있다고 생각한다. 다시 말해 <code>Gear</code>는 주입된 객체에게 <code>diameter</code>를 전송해도 된다고 생각한다.</li><li>둘째, 주입하기 위해 객체를 생성하는 코드는 <code>Wheel</code>이 이런 인터페이스를 구현하고 있다고 생각한다. 다시 말해 <code>Wheel</code>이 <code>diameter</code>를 구현하고 있다고 생각한다.</li><li>이제 <code>Diameterizable</code>가 변경되면서 문제가 발생하는데 <code>Wheel</code>에 새로운 인터페이스를 구현했지만 <code>Gear</code>는 여전히 예전 인터페이스를 사용하고 있다.</li><li>의존성 주입을 사용하는 궁극적인 이유는 이미 있는 코드를 수정하지 않고도 구체 클래스들을 서로 대체해서 사용하기 위함이다.</li><li>애플리케이션의 코드를 한 가지 방식으로 작성해야 한다면 실제 코드를 그대로 반영하는 방식으로 테스트를 작성하는 것이 종종 가장 효율적이다. 구체적인 것이 변하든 아니면 추상적인 것이 변하든, 테스트는 실패하는 지점에 제대로 실패할 것이기 때문이다.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-테스트-더블-만들기"></a>🐤 테스트 더블 만들기<a class="hash-link" href="#-테스트-더블-만들기" title="Direct link to heading">#</a></h4><ul><li>다음 예시는 <code>Diameterizable</code> 역할을 수행하는 가짜 객체 또는 테스트 더블을 만드는 방법이다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"># &quot;Diameterizable&quot; 역할을 수행할 가짜 객체</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class DiameterDouble</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def diameter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    10</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class GearTest &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_calculates_gear_inches</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    gear = Gear.new(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      chainring: 52,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      cog: 11,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      wheel: DiameterDouble.new</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_in_delta(47.27, gear.gear_inches, 0.01)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end  </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>이 테스트 더블은 역할을 수행하는 객체의 표준적인 형태로써, 전적으로 테스트만을 위한 것이다. 이런 테스트 더블이 대신하고 있는 실제 객체의 세세한 특징들은 뒤로 감춘다.</li><li>우리가 만든 테스트 더블은 <code>diameter</code>를 <strong>스텁</strong>(stubs)하고 있다. 다시 말해, 이미 정해진 값을 반환하는 <code>diameter</code> 메시지를 가지고 있다.</li><li><code>DiameterDouble</code>은 목(mock)이 <strong>아니다.</strong></li><li>테스트 더블을 주입하면 <code>Gear</code> 테스트와 <code>Wheel</code> 클래스 사이의 결합을 끊을 수 있다. 또한, 테스트는 간단하고 빠르고 독립적이며 의도를 명확하게 드러내게 될 수 있다.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-꿈속에서-살기"></a>🐤 꿈속에서 살기<a class="hash-link" href="#-꿈속에서-살기" title="Direct link to heading">#</a></h4><ul><li>아까 <code>diameter</code>를 <code>width</code>로 변경했었는데 <code>Gear</code>는 수정하지 않았다. 하지만, 위에서 변경한 테스트에서는 <code>Wheel</code> 대신에 <code>DiameterDouble</code>을 주입했고, 테스트는 성공하게 된다.</li><li>애플리케이션은 제대로 작동하지 않지만 테스트는 여전히 통과하고 있다.</li><li>그렇기 때문에 좀 더 나은 코드를 작성하기 위해서는 문제의 핵심을 이해하고 있어야 하고 결국 문제의 원인들을 꼼꼼히 살펴봐야 한다.</li><li>지금 발생한 문제는 <code>Wheel</code>에는 새로운 인터페이스를 반영했지만 <code>DiameterDouble</code>을 수정하지 않은 것이다.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-역할을-문서화하기-위해-테스트를-사용하기"></a>🐤 역할을 문서화하기 위해 테스트를 사용하기<a class="hash-link" href="#-역할을-문서화하기-위해-테스트를-사용하기" title="Direct link to heading">#</a></h4><ul><li>위와 같은 문제가 발생한 이뉴는 역할이 눈에 잘 띄지 않기 때문이다.</li><li>역할을 더욱 선명하게 드러낼 수 있는 방법 중 하나는 <code>Wheel</code>이 주어진 역할을 수행하고 있다고 명시적으로 선언하는 것이다.</li><li>아래의 코드에선 역할은 문서화되어 있고, <code>Wheel</code>이 역할을 제대로 구현하고 있는지 확인하고 있다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class WheelTest &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def setup</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @wheel = Wheel.new(26, 1.5)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_implements_the_diameterizable_interface</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_respond_to(@wheel, :diameter)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_calculates_diameter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    wheel = Wheel.new(26, 1.5)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_in_delta(29, wheel.diameter, 0.01)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li><code>test_implements_the_diameterizable_interface</code> 테스트는 역할을 테스트하는 방법을 보여주고 있지만, 만족스럽지 못하다. 첫째, 다른 <code>Diameterizable</code>은 이 테스트를 사용할 수 없다. 둘째, <code>Wheel</code>이 <code>Diameterizable</code> 역할을 수행하는지 검증하는 것만으로는 <code>Gear</code>의 <code>Diameterizable</code>를 깜빡 잊고 수정하지 않는 실수를 해결해주지 못한다.</li><li>테스트는 여전히 실패해야 하는 순간에도 문제가 없다고 말하고 있다. 하지만, 문서화화고 테스트하는 문제는 간단히 해결할 수 있다.</li><li>진짜 객체와 가짜 객체에서 선택하는 하는 문제는 진짜 객체는 실제 애플리케이션에서 발생하는 문제가 테스트에서도 정확히 포착된다. 대신 테스트 실행 속도가 느려진다.</li><li>반대로 테스트 더블을 주입하면 테스트를 동화 속 세상에 가둬버릴지도 모른다.</li><li>테스트 코드는 객체들 사이의 결합을 깨뜨려주지 않고 의존성을 주입해주지도 않는다.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-프라이빗-메서드-테스트하기"></a>📚 프라이빗 메서드 테스트하기<a class="hash-link" href="#-프라이빗-메서드-테스트하기" title="Direct link to heading">#</a></h2><ul><li>프라이빗 메서드는 테스트 중인 객체의 외부에서는 전혀 보이지 않기 때문에 이상적이고 완벽한 디자인이 갖춰져 있다면 프라이빗 메서드를 테스트하지 않아도 된다.</li><li>하지만, 프라이빗 메서드를 다룰 때에도 디자이너의 판단과 유연함이 필요하다.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-테스트-과정에서도-프라이빗-메서드-무시하기"></a>🎈 테스트 과정에서도 프라이빗 메서드 무시하기<a class="hash-link" href="#-테스트-과정에서도-프라이빗-메서드-무시하기" title="Direct link to heading">#</a></h3><ul><li>프라이빗 메서드를 테스트하지 말아야 할 이유는 다음과 같다.<ol><li>이런 테스트는 쓸모없다. 테스트 중인 객체 안에 숨어있기 때문에 그 외부에서는 보이지 않는다. <strong>프라이빗 메서드는 이미 테스트를 붙여 놓은 퍼블릭 메서드에 의해 호출된다.</strong></li><li>프라이빗 메서드는 불안정하다. 때문에 테스트는 변경될 확률이 높은 애플리케이션 코드에 결합되어 있다. 애플리케이션을 수정하면 뒤이어 테스트 역시 수정해야 한다.</li><li>프라이빗 메서드를 테스트하면 다른 프로그래머에게 이 메서드를 사용해도 된다는 잘못된 생각을 심어줄 수 있다. 코드의 캡슐화를 무시하고 프라이빗 메서드를 사용하게 된다.</li></ol></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-테스트-중인-클래스에서-프라이빗-메서드-제거하기"></a>🎈 테스트 중인 클래스에서 프라이빗 메서드 제거하기<a class="hash-link" href="#-테스트-중인-클래스에서-프라이빗-메서드-제거하기" title="Direct link to heading">#</a></h3><ul><li>프라이빗 메서드를 너무 많이 가지고 있어 도저히 테스트하지 않고 지나칠 수 없는 객체를 가지고 있다면, 메서드들을 새로운 객체로 옮기는 것을 고려해보아야 한다. 다시 말해 퍼블릭 인터페이스를 구성한다. 하지만 새로 구성한 인터페이스가 안정적인 경우에만 의미가 있다.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-프라이빗-메서드를-테스트하기"></a>🎈 프라이빗 메서드를 테스트하기<a class="hash-link" href="#-프라이빗-메서드를-테스트하기" title="Direct link to heading">#</a></h3><ul><li>프라이빗 메서드에 대한 테스트는 문제가 발생한 바로 그 부분을 정확하게 짚어주는데 의의가 있다. 정확한 에러 메시지를 제공해 줄 수 있기 때문이다. 이런 구체적인 에러들은 실제 코드와 테스트 코드 사이의 강한 결합을 뜻하며, 이런 결합은 유지보수 비용을 높인다.</li><li>하지만 코드를 수정하면 어떤 결과를 나오는지 이해하기 쉽게 만들어 주고, 복잡한 프라이빗 메서드를 리팩터링하는 과정의 힘겨움을 어느 정도 덜어 줄 수 있다.</li><li><strong>프라이빗 메서드를 테스트할 때 기본 원칙은 절대 테스트 하지 마라. 만약 테스트해야 한다면, 그래도 테스트 하지 마라. 물론 꼭 해야 하는 상황에서는 테스트해도 된다.</strong></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-밖으로-나가는-메시지-테스트하기"></a>📚 밖으로 나가는 메시지 테스트하기<a class="hash-link" href="#-밖으로-나가는-메시지-테스트하기" title="Direct link to heading">#</a></h2><ul><li>밖으로 나가는 메시지는 <strong>쿼리 메시지</strong>이거나 <strong>커맨드 메시지</strong>이다.</li><li>쿼리 메시지는 전송하는 송신자에게만 중요한 메시지이고 커맨드 메시지는 애플리케이션의 다른 객체들에게도 영향을 미친다.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-쿼리-메시지-무시하기"></a>🎈 쿼리 메시지 무시하기<a class="hash-link" href="#-쿼리-메시지-무시하기" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class Gear</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def gear_inches</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ratio * wheel.diameter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li><code>gear_inches</code>를 제외한 애플리케이션의 다른 부분은 <code>diameter</code>가 전송되었다는 사실에 관심이 없다. <code>diameter</code> 메서드는 아무런 부작용도 낳지 않는다.</li><li>자기 자신에게 전송하는 메시지를 테스트하지 않는 것과 같은 이유로 밖으로 나가는 메시지도 테스트할 필요가 없다.</li><li><code>gear_inches</code> 메서드는 <code>diameter</code> 메시지가 반환하는 값에 의존하고 있지만, <code>diameter</code>가 제대로 작동하는지 테스트하는 것은 <code>Wheel</code> 담당이지 <code>Gear</code>가 신경 쓸 내용이 아니다. 때문에 <code>Gear</code>가 테스트틀 중복해서 작성할 필요는 없다.</li><li><code>Gear</code>의 책임은 <code>gear_inches</code>가 제대로 작동하고 있는지 검증하는 것이다.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-커맨드-메시지-검증하기"></a>🎈 커맨드 메시지 검증하기<a class="hash-link" href="#-커맨드-메시지-검증하기" title="Direct link to heading">#</a></h3><ul><li>애플리케이션의 다른 부분이 이 메시지 전송의 결과에 의존하고 있으면 테스트 중인 객체가 메시지를 전송해야 할 책임을 가지고 있다.</li><li>예를 들어 <code>Gear</code> 클래스는 애플리케이션 전체에 기어가 바뀌는 순간 알려줄 책임이 있다. 이 정보를 가지고 행동을 변경해야 한다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class Gear</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  attr_reader :chainring, :cog, :wheel, :observer</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def initialize(args)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @observer = args[:observer]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def set_cog(new_cog)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @cog = new_cog</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    changed</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def set_chainring(new_chainring)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @chainring = new_chainring</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    changed</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def changed</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    observer.changed(chainring, cog)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li><code>cogs</code>나 <code>chainrings</code>가 변경되면 이 내용을 <code>observer</code>에게 알려줘야 한다. 때문에 <code>changed</code> 메시지가 전송되었는지 테스트해야 한다. 또한, <code>observer</code>의 <code>changed</code>메서드가 무엇을 반환하는지와는 상관없이 작동해야 한다.</li><li>중복을 피하려면 <code>Gear</code>의 <code>changed</code>가 무엇을 반환하는지 확인하지 않으면서도, <code>Gear</code>가 <code>changed</code>를 <code>observer</code>에게 전송했다는 사실을 검증해야 한다. 이럴때 <strong>목</strong>(<strong>mock</strong>)을 사용하면 된다. 목은 행동에 대한 테스트이고, 상태에 대한 테스트와는 반대된다. 목 객체가 기대하는 바를 테스트한다.</li><li>테스트는 목 객체를 만들고 목 객체를 <code>observer</code>의 위치에 놓는다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class GearTest &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def setup</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @observer = MiniTest::Mock.new</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @gear = Gear.new(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      chainring: 52,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      cog: 11,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      observer = @observer</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_notifies_observers_when_cogs_change</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 목 객체가 changed 메시지를 수신하고자 한다는 사실을 명시 (어떤 메시지를 기대하고 있는지)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @observer.expect(:changed, true, [52, 27])</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 기대를 충족시킬 수 있는 행동을 유발</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @gear.set_cog(27)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # 목 객체에게 주어진 기대가 충족하는지 물어본다.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @observer.verify</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_notifies_observers_when_chainring_change</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @observer.expect(:changed, true, [42, 11])</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @gear.set_chainring(42)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @observer.verify</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>목 객체가 메시지를 가지고 하는 일은 그저 메시지를 수신했다는 사실을 기억하는 것뿐이다. 반환 값이 중한게 아니라 메시지의 전송 여부를 검증해야 한다.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-오리-타입-테스트하기"></a>📚 오리 타입 테스트하기<a class="hash-link" href="#-오리-타입-테스트하기" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-역할-테스트하기"></a>🎈 역할 테스트하기<a class="hash-link" href="#-역할-테스트하기" title="Direct link to heading">#</a></h3><ul><li>5장의 예제이다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class Trip</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  attr_reader :bicycles, :customers, :vehicle</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def prepare(preparers)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    preparers.each {|preparer|</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      preparer.prepare_trip(self)}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class Mechanic</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def prepare_trip(trip)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    trip.bicycles.each {|bicycle|</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      prepare_bicycle(bicycle)}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class TripCoordinator</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def prepare_trip(trip)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    buy_food(trip.customers)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class Driver</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def prepare_trip(trip)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    vehicle = trip.vehicle</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    gas_up(vehicle)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    fill_water_tank(vehicle)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>테스트는 <code>Preparer</code> 역할을 문서화해야 하고, 역할 수행자 각각이 올바르게 행동하고 있는지 검증해야 한다. 그리고 <code>Trip</code>이 <code>Preparers</code>들과 제대로 소통하고 있다는 것을 보여줘야 한다.</li><li><code>Preparer</code>의 인터페이스를 테스트하고 문서화해주는 모듈은 다음과 같다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">module PreparerInterfaceTest</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_implements_the_preparer_interface</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_respond_to(@object, :prepare_trip)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>이 모듈은 <code>@object</code>가 <code>prepare_trip</code>에 반응하는지 검증한다. 아래 테스트 코드는 이 모듈을 사용해서 <code>Mechanic</code>이 <code>Preparer</code>인지 확인하고 있다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class MechanicTest &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  include PreparerInterfaceTest</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def setup</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # @object를 가지고 Mechanic을 만든다.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @mechanic = @object = Mechanic.new</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  # @mechanic을 사용하는 다른 테스트들</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>나머지 <code>TripCoordinator</code>와 <code>Driver</code> 테스트도 같은 패턴이다.</li><li><code>PreparerInterfaceTest</code>를 모듈의 형태로 정의했기 때문에 테스트를 한 번만 작성하고도 역할 수행 객체들이 테스트 코드를 재사용할 수 있었다. 모듈 덕분에 역할을 명시적으로 불 수 있게 되었다.</li><li>들어오는 메시지를 테스트하였으니 반대로 <code>Trip</code>이 전송하는 메시지를 테스트한다. 목 객체를 만들고 이 객체가 기대하는 바를 정의하면 된다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class TripTest &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_requests_trip_preparation</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @preparer = MiniTest::Mock.new # 목 객체 생성</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @trip = Trip.new</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @preparer.expect(:prepare_trip, nil, [@trip])</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @trip.prepare([@preparer]) # 메서드 실행</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @preparer.verify # 목 객체가 제대로 수신했는지 확인</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-테스트-더블을-확인하기-위해-역할-테스트-사용하기"></a>🎈 테스트 더블을 확인하기 위해 역할 테스트 사용하기<a class="hash-link" href="#-테스트-더블을-확인하기-위해-역할-테스트-사용하기" title="Direct link to heading">#</a></h3><ul><li>아래는 잘못된 테스트 코드로 이전에 설명했던 스텁을 사용했을 때의 문제이다. (실패해야 하는 순간에도 통과)</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class DiameterDouble</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def diameter # 인터페이스가 &#x27;width&#x27;로 바뀌었지만</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    10         # 이 테스트 더블과 Gear 모두</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end          # 여전히 &#x27;diameter&#x27;를 사용하고 있다.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class GearTest &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_calculates_gear_inches</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    gear = Gear.new(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      chainring: 52,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      cog: 11,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      wheel: DiameterDouble.new</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_in_delta(47.27, gear.gear_inches, 0.01)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end  </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>더 이상 유효하지 않은 테스트 더블 때문에 테스트는 문제를 걸러내지 못하고 <code>Gear</code>가 정상적으로 작동한다는 잘못된 믿음을 준다. 하지만 <code>GearTest</code>가 정상적으로 작동한다는 것은 잘못된 테스트 더블을 사용했기 때문이다.</li><li><code>WheelTest</code>를 다음과 같이 만들었었다.</li><li><code>Wheel</code>이 <code>width</code> 인터페이스를 구현하고 있는 <code>Diameterizable</code>의 역할을 수행하고 있다는 사실을 검증하고 있다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class WheelTest &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def setup</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @wheel = Wheel.new(26, 1.5)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_implements_the_diameterizable_interface</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_respond_to(@wheel, :width)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_calculates_diameter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>문제를 해결하기 위해서 <code>Wheel</code>에서 <code>test_implements_the_diameterizable_interface</code> 테스트를 뽑아내서 새로운 모듈 속에 넣는다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">module DiameterizableInterfaceTest</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_implements_the_diameterizable_interface</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_respond_to(@object, :width)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>모듈을 인클루드하고 <code>Wheel</code>을 가지고 <code>@object</code>를 초기화한다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class WheelTest &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  include DiameterizableInterfaceTest</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def setup</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @wheel = Wheel.new(26, 1.5)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_calculates_diameter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>리팩터링의 결과로 독립적인 모듈을 얻었고, 이 모듈은 <code>Diameterizable</code>이 제대로 작동한다는 것을 검증해줄 수 있다.</li><li>아래 코드는 <code>GearTest</code>에 이 모듈을 적용한 것이다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class DiameterDouble</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def diameter</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    10</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"># 테스트 더블이 올바른 인터페이스를 따르고 있는지 검증한다.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class DiameterDoubleTest &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    include DiameterizableInterfaceTest</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def setup</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @object = DiameterDouble.new</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class GearTest &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_calculates_gear_inches</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    gear = Gear.new(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      chainring: 52,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      cog: 11,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      wheel: DiameterDouble.new</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_in_delta(47.27, gear.gear_inches, 0.01)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end  </span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>이렇게 테스트 더블이 주어진 역할을 올바르게 수행하고 있는지도 테스트한다. 테스트를 실행하면 <code>DiameterDoubleTest</code>에 에러가 출력된다. 그리고 <code>DiameterDouble</code>에 <code>width</code>를 추가할 수 있다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class DiameterDouble</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def width</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    10</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>이제 테스트 더블을 수정하고 다시 테스트를 돌려보면, 테스트는 <code>GearTest</code>애서 실패한다.</li><li><code>Gear</code>의 <code>gear_inches</code> 메서드가 <code>diameter</code> 대신 <code>width</code>를 전송해야한다는 것이다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class Gear</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def gear_inches</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ratio * wheel.width</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>오리 타입을 테스트하려면 역할을 테스트하는 독립적인 코드를 만들고 이 코드를 공유할 수 있어야만 한다.</li><li>이렇게 역할 기반의 관점을 취하고 난 뒤, 테스트 중인 객체의 관점에서 보면 다른 모든 객체는 하나의 역할이다. 그리고 이 객체들을 주어진 역할의 대변자로 취급하면, 애플리케이션과 테스트 모두 결합을 줄이고 유연성을 높일 수 있다.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-상속-받은-코드-테스트하기"></a>📚 상속 받은 코드 테스트하기<a class="hash-link" href="#-상속-받은-코드-테스트하기" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-상속-받는-인터페이스-명확하게-하기"></a>🎈 상속 받는 인터페이스 명확하게 하기<a class="hash-link" href="#-상속-받는-인터페이스-명확하게-하기" title="Direct link to heading">#</a></h3><ul><li>아래는 6장의 <code>Bicycle</code> 클래스이다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class Bicycle</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  attr_reader :size, :chain, :tire_size</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def initialize(args={})</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @size = args[:size]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @chain = args[:chain] || default_chain</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @tire_size = args[:tire_size] || default_tire_size</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    post_initialize(args)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def spares</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      tire_size: tire_size,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      chain: chain,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }.merge(local_spares)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def default_tire_size</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    raise NotImplementedError, &quot;This #{self.class} cannot respond to:&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  # 하위클래스가 재정의할 수 있다.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def post_initialize(args)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    nil</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def local_spares</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def default_chain </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;10-speed&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>아래는 <code>Bicycle</code>의 하위클래스 중 하나인 <code>RoadBike</code> 코드이다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class RoadBike &lt; Bicycle</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  attr_reader :tape_color</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def post_initialize(args)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @tape_color = args[:tape_color]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def local_spares</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    { tape_color: tape_color }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def default_tire_size</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;23&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>테스트의 첫 번째 목표는 이 상속 관계에 속한 모든 객체들이 약속을 제대로 이행하고 있는지 검증하는 것이다.</li><li>리스코프 원칙을 검증하는 방법은 공통의 약속을 테스트하는 공용코드를 작성하고 이 테스트를 모든 객체에 인클루드하는 것이다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">module BicycleInterfaceTest</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_responds_to_default_tire_size</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_respond_to(@object, :default_tire_size)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_responds_to_default_chain</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_respond_to(@object, :default_chain)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_responds_to_chain</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_respond_to(@object, :chain)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_responds_to_size</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_respond_to(@object, :size)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_responds_to_tire_size</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_respond_to(@object, :tire_size)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_responds_to_spares</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_respond_to(@object, :spares)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li><code>BicycleInterfaceTest</code> 테스트를 통과하는 모든 객체는 <code>Bicycle</code>처럼 행동하는 객체라고 볼 수 있다.</li><li>아래 코드는 <code>BicycleTest</code>에 이 인터페이스를 인클드한 것이다. 그리고 구체적인 하위클래스 <code>RoadBikeTest</code>에도 인클루드했다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class BicycleTest &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  include BicycleInterfaceTest</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def setup</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @bike = @object = Bicycle.new({tire_size: 0})</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class RoadBikeTest &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  include BicycleInterfaceTest</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def setup</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @bike = @object = RoadBike.new</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li><code>BicycleInterfaceTest</code>는 모든 종류의 <code>Bicycle</code>이 사용할 수 있고, 새로운 클래스를 만들더라도 쉽게 인클루드할 수 있다.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-하위클래스의-책임-명확히-하기"></a>🎈 하위클래스의 책임 명확히 하기<a class="hash-link" href="#-하위클래스의-책임-명확히-하기" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-하위클래스의-행동-확인하기"></a>🐤 하위클래스의 행동 확인하기<a class="hash-link" href="#-하위클래스의-행동-확인하기" title="Direct link to heading">#</a></h4><ul><li>아래 코드는 하위클래스가 갖추어야 하는 바를 문서화한 테스트이다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">module BicycleSubClassTest</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_responds_to_post_initialize</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_respond_to(@object, :post_initialize)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_responds_to_local_spares</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_respond_to(@object, :local_spares)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_responds_to_default_tire_size</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_respond_to(@object, :default_tire_size)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>이 테스트는 이 메시지들이 오작동하는 것을 방지할 뿐이다. 하위클래스가 꼭 구현해야 하는 메서드는 <code>default_tire_size</code>이다. 하위클래스가 자신만의 고유한 로직을 구현하지 않는다면 테스트는 통과할 수 없다.</li><li><code>RoadBike</code>는 <code>Bicycle</code>의 하위클래스처럼 작동해야 한다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class RoadBikeTest &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  include BicycleInterfaceTest</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  include BicycleSubClassTest</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def setup</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @bike = @object = RoadBike.new</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>이 두 개의 인터페이스를 사용하면 하위클래스가 공유하는 모든 행동을 쉽게 테스트할 수 있다.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-상위클래스의-요구사항-검증하기"></a>🐤 상위클래스의 요구사항 검증하기<a class="hash-link" href="#-상위클래스의-요구사항-검증하기" title="Direct link to heading">#</a></h4><ul><li>하위클래스가 <code>default_tire_size</code>를 구현하고 있지 않다면 <code>Bicycle</code>이 에러를 발생시켜야 한다. 이 조건은 하위클래스가 충족시켜야 하는 것이지만 실제 행동은 <code>Bicycle</code> 안에서 실행된다. 때문에 이 테스트는 <code>BicycleTest</code> 안에 직접 추가되어야 한다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class BicycleTest &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  include BicycleInterfaceTest</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def setup</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @bike = @object = Bicycle.new({tire_size: 0})</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_forces_subclasses_to_implement_default_tire_size</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_raises(NotImplementedError) {@bike.default_tire_size}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-하나뿐인-행동-테스트하기"></a>🎈 하나뿐인 행동 테스트하기<a class="hash-link" href="#-하나뿐인-행동-테스트하기" title="Direct link to heading">#</a></h3><ul><li>이제 두 가지의 문제만이 남았다. 하나는 구체적인 하위클래스만의 특수한 행동을 테스트하지 않았고, 추상화된 상위클래스가 제공하는 구체적인 행동도 테스트하지 않았다.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-구체적인-하위클래스의-행동-테스트하기"></a>🐤 구체적인 하위클래스의 행동 테스트하기<a class="hash-link" href="#-구체적인-하위클래스의-행동-테스트하기" title="Direct link to heading">#</a></h4><ul><li><code>RoadBike</code>의 특수한 행동만 테스트하면 된다.</li><li>하위클래스의 특수한 행동을 테스트할 때는 상위클래스에 대한 지식을 끌어오지 않는 것이 중요하다.</li><li>아래 <code>RoadBikeTest</code>는 <code>local_spares</code> 메서드를 테스트하고 있는데 이때 <code>spares</code>에 반응하면 안되고 존재를 무시해야 한다. (이미 <code>BicycleInterfaceTest</code>가 검증했다.)</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class RoadBikeTest &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  include BicycleInterfaceTest</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  include BicycleSubClassTest</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def setup</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @bike = @object = RoadBike.new(tape_color: &#x27;red&#x27;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_puts_tape_color_in_local_spares</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_equal &#x27;red&#x27;, @bike.local_spares[:tape_color]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-추상화된-상위클래스의-행동-테스트하기"></a>🐤 추상화된 상위클래스의 행동 테스트하기<a class="hash-link" href="#-추상화된-상위클래스의-행동-테스트하기" title="Direct link to heading">#</a></h4><ul><li><code>Bicycle</code>의 상속 관계를 살펴보면 여전히 추상화된 상위클래스이기 때문에 발생하는 문제가 여전히 남아 있다. <code>Bicycle</code>의 인스턴스를 생성하기도 어렵고 테스트를 하기 위한 충분한 행동을 가지고 있지 않을 수도 있다.</li><li>해결책은 <code>Bicycle</code>은 구체적인 행동을 구현하기 위해 템플릿 메서드를 사용하고 있기 때문에 상위클래스가 제공하는 행동을 스텁하면 된다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"># Bicycle의 새로운 하위클래스인 StubbedBike를 정의한다.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class StubbedBike &lt; Bicycle</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def default_tire_size</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def local_spares</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {saddle: &#x27;painful&#x27;}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class Bicycle &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  include BicycleInterfaceTest</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def setup</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @bike = @object = Bicycle.new({tire_size: 0})</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    # StubbedBike 클래스의 인스턴스 생성</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @stubbed_bike = StubbedBike.new</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_forces_subclasses_to_implement_default_tire_size</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_raises(NotImplementedError) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      @bike.default_tire_size</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  # local_spares를 제대로 처리하는지 검증</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def test_includes_local_spares_in_spares</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_equal @stubbed_bike.spares,{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      tire_size: 0,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      chain: &#x27;10-speed&#x27;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      saddle: &#x27;painful&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>만약 <code>StubbedBike</code>가 더 이상 유효하지 않아서 <code>BicycleTest</code>가 실패해야 할 때 실패하지 않을까 걱정된다면, 해결책은 이미 <code>BicycleSubClassTest</code>를 가지고 있다는 것이다. <code>BicycleSubClassTest</code>를 이용해서 <code>StubbedBike</code>의 정상상태를 확인할 수 있다.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ruby"><pre tabindex="0" class="prism-code language-ruby codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">class StubbedBike &lt; MiniTest::Unit::TestCase</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  include BicycleSubClassTest</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  def setup</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @object = StubbedBike.new</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  end</span></span><span class="token-line" style="color:#393A34"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>전체적인 인터페이스에 대한 코드를 하나 작성해서 공유하고, 하위클래스의 책임을 테스트하면 된다.</li><li>여러가지 책임을 독립적으로 분리하도록 노력한다. 또한 하위클래스 고유의 행동을 테스트할 때는 상위클래스에 대한 지식이 하위클래스의 테스트 속으로 흘러들어오지 않도록 주의해야 한다.</li><li>리스코프 원칙에 충실한 새로운 하위클래스를 만들고, 이 클래스의 테스트 용도로 사용할 수 있다.</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/saseungmin/reading_books_record_repository/tree/master/docs/object-oriented/design-in-ruby/chapter-9.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/reading_books_record_repository/docs/object-oriented/design-in-ruby/chapter-8"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« ✌️ Chapter 8: 조합을 이용해 객체 통합하기</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/reading_books_record_repository/docs/object-oriented/elegant-object/table-of-contents"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">🚀 목차 »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-의도를-가지고-테스트하기" class="table-of-contents__link">📚 의도를 가지고 테스트하기</a><ul><li><a href="#-테스트-의도를-알기" class="table-of-contents__link">🎈 테스트 의도를 알기</a></li><li><a href="#-무엇을-테스트할지-알기" class="table-of-contents__link">🎈 무엇을 테스트할지 알기</a></li><li><a href="#-언제-테스트할지-알기" class="table-of-contents__link">🎈 언제 테스트할지 알기</a></li><li><a href="#-어떻게-테스트할지-알기" class="table-of-contents__link">🎈 어떻게 테스트할지 알기</a></li></ul></li><li><a href="#-들어오는-메시지-테스트하기" class="table-of-contents__link">📚 들어오는 메시지 테스트하기</a><ul><li><a href="#-사용하지-않는-인터페이스-제거하기" class="table-of-contents__link">🎈 사용하지 않는 인터페이스 제거하기</a></li><li><a href="#-퍼블릭-인터페이스-검증하기" class="table-of-contents__link">🎈 퍼블릭 인터페이스 검증하기</a></li><li><a href="#-테스트-중인-객체-고립시키기" class="table-of-contents__link">🎈 테스트 중인 객체 고립시키기</a></li><li><a href="#-클래스를-사용해서-의존성-주입하기" class="table-of-contents__link">🎈 클래스를 사용해서 의존성 주입하기</a></li><li><a href="#-역할에-대한-의존성-주입하기" class="table-of-contents__link">🎈 역할에 대한 의존성 주입하기</a></li></ul></li><li><a href="#-프라이빗-메서드-테스트하기" class="table-of-contents__link">📚 프라이빗 메서드 테스트하기</a><ul><li><a href="#-테스트-과정에서도-프라이빗-메서드-무시하기" class="table-of-contents__link">🎈 테스트 과정에서도 프라이빗 메서드 무시하기</a></li><li><a href="#-테스트-중인-클래스에서-프라이빗-메서드-제거하기" class="table-of-contents__link">🎈 테스트 중인 클래스에서 프라이빗 메서드 제거하기</a></li><li><a href="#-프라이빗-메서드를-테스트하기" class="table-of-contents__link">🎈 프라이빗 메서드를 테스트하기</a></li></ul></li><li><a href="#-밖으로-나가는-메시지-테스트하기" class="table-of-contents__link">📚 밖으로 나가는 메시지 테스트하기</a><ul><li><a href="#-쿼리-메시지-무시하기" class="table-of-contents__link">🎈 쿼리 메시지 무시하기</a></li><li><a href="#-커맨드-메시지-검증하기" class="table-of-contents__link">🎈 커맨드 메시지 검증하기</a></li></ul></li><li><a href="#-오리-타입-테스트하기" class="table-of-contents__link">📚 오리 타입 테스트하기</a><ul><li><a href="#-역할-테스트하기" class="table-of-contents__link">🎈 역할 테스트하기</a></li><li><a href="#-테스트-더블을-확인하기-위해-역할-테스트-사용하기" class="table-of-contents__link">🎈 테스트 더블을 확인하기 위해 역할 테스트 사용하기</a></li></ul></li><li><a href="#-상속-받은-코드-테스트하기" class="table-of-contents__link">📚 상속 받은 코드 테스트하기</a><ul><li><a href="#-상속-받는-인터페이스-명확하게-하기" class="table-of-contents__link">🎈 상속 받는 인터페이스 명확하게 하기</a></li><li><a href="#-하위클래스의-책임-명확히-하기" class="table-of-contents__link">🎈 하위클래스의 책임 명확히 하기</a></li><li><a href="#-하나뿐인-행동-테스트하기" class="table-of-contents__link">🎈 하나뿐인 행동 테스트하기</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/reading_books_record_repository/docs/javascript/table-of-contents">자바스크립트</a></li><li class="footer__item"><a class="footer__link-item" href="/reading_books_record_repository/docs/typescript/table-of-contents">타입스크립트</a></li><li class="footer__item"><a class="footer__link-item" href="/reading_books_record_repository/docs/agile/table-of-contents">애자일</a></li><li class="footer__item"><a class="footer__link-item" href="/reading_books_record_repository/docs/object-oriented/table-of-contents">객체지향</a></li><li class="footer__item"><a class="footer__link-item" href="/reading_books_record_repository/docs/functional/table-of-contents">함수형</a></li><li class="footer__item"><a class="footer__link-item" href="/reading_books_record_repository/docs/clean/table-of-contents">클린코드</a></li><li class="footer__item"><a class="footer__link-item" href="/reading_books_record_repository/docs/git/table-of-contents">Git</a></li><li class="footer__item"><a class="footer__link-item" href="/reading_books_record_repository/docs/etc/table-of-contents">기타</a></li></ul></div><div class="col footer__col"><div class="footer__title">Link</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/saseungmin" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://haranglog.tistory.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="mailto:dbd02169@naver.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>E-mail<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.facebook.com/saseungmin95" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/saseungmin/reading_books_record_repository/tree/master/summarize_books_in_markdown" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github Markdown에서 보기<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/saseungmin/reading_books_record_repository" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub Repository<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Summary of Books, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/reading_books_record_repository/assets/js/runtime~main.8d5da479.js"></script>
<script src="/reading_books_record_repository/assets/js/main.26591cb8.js"></script>
</body>
</html>